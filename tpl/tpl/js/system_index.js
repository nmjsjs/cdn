;var encode_version = 'sojson.v5', cqkaw = '__0x6c52f',  __0x6c52f=['KMOHZsKQw7nCsMKQF8OK','HsK2wrp0Lw==','IMOwwpg3wp8VwoV0Nw==','LQtbbMKfI2DDjxg=','wpdtwoQBTg==','5LmY6IKV5Yqq6ZukwrnDnMODw4/Cp8Kidy3CnA==','wrhDCcKCwoQS','wqZFZg==','CMKpOMOVwrkW','NcKKBg==','HsOKw5o=','L8KiMw==','5LuN6IOI5Yiz6ZqMEy7CmWzDpznCkkAt','wpwzwq4=','wqxNOQ==','TyPDt8K3w7DDvMKUwrLDkVZmPSs=','FwhoXcK5','w7HDjBTDhwU=','wrU1A8OTfw==','w7QbOXDDrg==','wqlQW8KbAw==','G1TDklXCvw==','wrxiFA==','wo1zRVzDsA==','wpHCuHZHFQ==','woZaHQ/Cuw==','UyzClcOuw4Q=','IHfDoQ/Cmg==','M8KzOcKIw60=','R1DDssODQA==','woNJYlDDnw==','KwrCj8Ktwrc=','ezDCvMOAw7Q=','wpl/wqF9bQ==','wrsjEMOMdw==','w6cgwqRXw4U=','YsO9wrLDpsKP','w6QJUcKKJQ==','w4sCwqB6w4M=','w5vDqR/Dlik=','OGnCvhRU','FmjDrCLCmQ==','wp4dMUQF','wr5uwolDSA==','A8KBwrfDsAI=','worCjMKmbcO5','w58zK2rDpQ==','w4/DhHsHw5c=','Hm8OQsK6w53DrQ==','DsOXw4BewrI=','w7vCukHDm8KyKsOz','wph8eng=','w7ERFg==','CMOKw5xCwq9Pw6U=','FG4GXg==','w5/DkjnCscOjMMOg','wrAqG8OpQA==','EsODGE3DucOxHg==','w6zCp07Di8K4','B8KjOMOBwqISw7w=','wo7DvsKfZULCl8KxQ8Kt','I8OMw5lfwrc=','TEbCvQ==','fiVl','dn/CocK/QQ==','D8O0RMKzw4w=','w6rDgSPDmSM=','w7bCs3U=','w6AzT8OgFUphQ8KrOkXChAcyW3Ev','wp3CpkNhDQ==','w4U9E2vDjA==','a8Kxwq0fSw==','JwLDhMOmwp8=','JhjDpsOpwr4=','w73CrUzDjcKtMsO/wpxB','w5/DlHjDoA==','PAbDrMOv','wo/Do8KedVU=','X8Kdwqg=','w43Dh3jDoQ0=','LXfCugVF','w7wOAW/DtA==','wrLCukk=','w77Dp1w=','wrEBG8OowpI=','w4ZuE2rDhg==','w7fDrTzChsOB','BMKvJMKQw58=','woloZnXDpXvDuV7CmwbCiw7DhkoJw7E=','w7R7wpo4wqzDpXHDunXCqU7CklbDvMO+wofCi2haw7B4Lg3DvcOEM3JIw7pzw6HDplnDncKtwpFvw4tgAyjClGxfXcOCw6jDtzNjw7F/woF/SMKgwp7ChsOgRcOmbw==','FDHCr8K/','VsODwr3DvsKx','wrM7wpRSw7U=','P0rCgg==','FMOEwpo=','w50lwrUawp4=','woIeEXMT','bX3Cp8K8Tw==','wq/CrHpyGw==','BMOVHHbDng==','w5w1wrVn','EmcRS8K4','Zi/Cm0QX','BcOJBUo=','JsO6ZsKPw4M=','w6EtXcKrLw==','bBTCmGE2','w7cwbsKkBA==','WhnDpsKpw4Y=','wq9CQsKGFg==','EidHdsKq','wrvCgiV4w7A=','wqpqIgAm','D0rDhlzCoMOOwq8Gw6k=','IsOdb8KQw6rCsA==','w44lwqhww7jCpjbCqw==','ED8BV1B7wppIwqbDrMKDRWo=','wpEBwog=','wqcFO8ONQg==','w5LDhG83w40=','w4Ygwr5Kw6I=','w6R4FVfDmQ==','wrQXNMOKwow=','w7wOwr4Jwow=','w5TDnmYgw7Q=','D8OWw5F0wqw=','eWLDs8OBZQ==','G0wXecKl','wrg1NsOzwq4=','Vi/ChsOHw5E=','wrUbNFkde8Ok','wqh1PB8ww7HDng==','worDiCASwpvDvEHDrcO6fMKEV8OTQSp9bA==','FsK9wr3DngU=','wrhqPgUr','wrJCwqVyTRRXwqEl','MMKewo1NGw==','w73Cp13Dh8Kv','w5zDh2vDrRo=','woZzbnk=','wofDqcKb','LmTCqQg=','SyvChFIu','CVTDjlDCsg==','wojDqcKSc13Cj8K9','w4w1wqRmw6s=','XVjCo8KVecO2dw==','w4jDhnYNw4Y=','fyLCpGYMdMOX','W0XCv8KJZA==','cWnDhcO9WcONwrA=','NwpXcA==','UMKdwqEEZcOkaA==','EW8H','w5IMwoI+','wpVuwo8AVQ0l'];(function(_0x40ff23,_0x521c47){var _0x188405=function(_0x5a7659){while(--_0x5a7659){_0x40ff23['push'](_0x40ff23['shift']());}};var _0xa65da=function(){var _0x87b851={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3fce1f,_0x31075f,_0x24181f,_0x6f9d52){_0x6f9d52=_0x6f9d52||{};var _0x155830=_0x31075f+'='+_0x24181f;var _0x413f39=0x0;for(var _0x413f39=0x0,_0x481c16=_0x3fce1f['length'];_0x413f39<_0x481c16;_0x413f39++){var _0x3be857=_0x3fce1f[_0x413f39];_0x155830+=';\x20'+_0x3be857;var _0x2d9007=_0x3fce1f[_0x3be857];_0x3fce1f['push'](_0x2d9007);_0x481c16=_0x3fce1f['length'];if(_0x2d9007!==!![]){_0x155830+='='+_0x2d9007;}}_0x6f9d52['cookie']=_0x155830;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2c1088,_0x5e7b06){_0x2c1088=_0x2c1088||function(_0x2554b8){return _0x2554b8;};var _0x26172c=_0x2c1088(new RegExp('(?:^|;\x20)'+_0x5e7b06['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x367cba=function(_0x358c2b,_0x1e1761){_0x358c2b(++_0x1e1761);};_0x367cba(_0x188405,_0x521c47);return _0x26172c?decodeURIComponent(_0x26172c[0x1]):undefined;}};var _0x33011=function(){var _0x398eb0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x398eb0['test'](_0x87b851['removeCookie']['toString']());};_0x87b851['updateCookie']=_0x33011;var _0x1d3a54='';var _0xd733b5=_0x87b851['updateCookie']();if(!_0xd733b5){_0x87b851['setCookie'](['*'],'counter',0x1);}else if(_0xd733b5){_0x1d3a54=_0x87b851['getCookie'](null,'counter');}else{_0x87b851['removeCookie']();}};_0xa65da();}(__0x6c52f,0x176));var _0x34b6=function(_0x16dd95,_0xc0c19c){_0x16dd95=_0x16dd95-0x0;var _0x3b2940=__0x6c52f[_0x16dd95];if(_0x34b6['initialized']===undefined){(function(){var _0x44b792=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x58f547='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x44b792['atob']||(_0x44b792['atob']=function(_0x36bfd5){var _0x314ff2=String(_0x36bfd5)['replace'](/=+$/,'');for(var _0x1ba367=0x0,_0x46522e,_0x4dd6f6,_0x18af0e=0x0,_0x4d7f80='';_0x4dd6f6=_0x314ff2['charAt'](_0x18af0e++);~_0x4dd6f6&&(_0x46522e=_0x1ba367%0x4?_0x46522e*0x40+_0x4dd6f6:_0x4dd6f6,_0x1ba367++%0x4)?_0x4d7f80+=String['fromCharCode'](0xff&_0x46522e>>(-0x2*_0x1ba367&0x6)):0x0){_0x4dd6f6=_0x58f547['indexOf'](_0x4dd6f6);}return _0x4d7f80;});}());var _0x5f5d92=function(_0x198ca1,_0x27d6f3){var _0x3521d8=[],_0x199697=0x0,_0x5d116a,_0x500432='',_0x18365e='';_0x198ca1=atob(_0x198ca1);for(var _0x2b7631=0x0,_0x10c1a0=_0x198ca1['length'];_0x2b7631<_0x10c1a0;_0x2b7631++){_0x18365e+='%'+('00'+_0x198ca1['charCodeAt'](_0x2b7631)['toString'](0x10))['slice'](-0x2);}_0x198ca1=decodeURIComponent(_0x18365e);for(var _0x1f95ba=0x0;_0x1f95ba<0x100;_0x1f95ba++){_0x3521d8[_0x1f95ba]=_0x1f95ba;}for(_0x1f95ba=0x0;_0x1f95ba<0x100;_0x1f95ba++){_0x199697=(_0x199697+_0x3521d8[_0x1f95ba]+_0x27d6f3['charCodeAt'](_0x1f95ba%_0x27d6f3['length']))%0x100;_0x5d116a=_0x3521d8[_0x1f95ba];_0x3521d8[_0x1f95ba]=_0x3521d8[_0x199697];_0x3521d8[_0x199697]=_0x5d116a;}_0x1f95ba=0x0;_0x199697=0x0;for(var _0x535da1=0x0;_0x535da1<_0x198ca1['length'];_0x535da1++){_0x1f95ba=(_0x1f95ba+0x1)%0x100;_0x199697=(_0x199697+_0x3521d8[_0x1f95ba])%0x100;_0x5d116a=_0x3521d8[_0x1f95ba];_0x3521d8[_0x1f95ba]=_0x3521d8[_0x199697];_0x3521d8[_0x199697]=_0x5d116a;_0x500432+=String['fromCharCode'](_0x198ca1['charCodeAt'](_0x535da1)^_0x3521d8[(_0x3521d8[_0x1f95ba]+_0x3521d8[_0x199697])%0x100]);}return _0x500432;};_0x34b6['rc4']=_0x5f5d92;_0x34b6['data']={};_0x34b6['initialized']=!![];}var _0x390283=_0x34b6['data'][_0x16dd95];if(_0x390283===undefined){if(_0x34b6['once']===undefined){var _0xf962a6=function(_0x14fb1d){this['rc4Bytes']=_0x14fb1d;this['states']=[0x1,0x0,0x0];this['newState']=function(){return'newState';};this['firstState']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*';this['secondState']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xf962a6['prototype']['checkState']=function(){var _0x31cbbf=new RegExp(this['firstState']+this['secondState']);return this['runState'](_0x31cbbf['test'](this['newState']['toString']())?--this['states'][0x1]:--this['states'][0x0]);};_0xf962a6['prototype']['runState']=function(_0x4cd60e){if(!Boolean(~_0x4cd60e)){return _0x4cd60e;}return this['getState'](this['rc4Bytes']);};_0xf962a6['prototype']['getState']=function(_0x24d5f4){for(var _0xb64d1d=0x0,_0x526740=this['states']['length'];_0xb64d1d<_0x526740;_0xb64d1d++){this['states']['push'](Math['round'](Math['random']()));_0x526740=this['states']['length'];}return _0x24d5f4(this['states'][0x0]);};new _0xf962a6(_0x34b6)['checkState']();_0x34b6['once']=!![];}_0x3b2940=_0x34b6['rc4'](_0x3b2940,_0xc0c19c);_0x34b6['data'][_0x16dd95]=_0x3b2940;}else{_0x3b2940=_0x390283;}return _0x3b2940;};var _0x4d6479=function(){var _0xeec469=!![];return function(_0x3cb299,_0x515800){var _0x9ae495=_0xeec469?function(){if(_0x515800){var _0x1cd8bc=_0x515800['apply'](_0x3cb299,arguments);_0x515800=null;return _0x1cd8bc;}}:function(){};_0xeec469=![];return _0x9ae495;};}();var _0x35f525=_0x4d6479(this,function(){var _0x49a2b8=function(){return'\x64\x65\x76';},_0x4a1872=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x709a25=function(){var _0x536170=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x536170['\x74\x65\x73\x74'](_0x49a2b8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x23d465=function(){var _0x492deb=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x492deb['\x74\x65\x73\x74'](_0x4a1872['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x37b920=function(_0x9aa413){var _0x4d5d2e=~-0x1>>0x1+0xff%0x0;if(_0x9aa413['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4d5d2e)){_0x1260ed(_0x9aa413);}};var _0x1260ed=function(_0x2d0745){var _0xebdfff=~-0x4>>0x1+0xff%0x0;if(_0x2d0745['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xebdfff){_0x37b920(_0x2d0745);}};if(!_0x709a25()){if(!_0x23d465()){_0x37b920('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x37b920('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x37b920('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x35f525();var _0x5a4c38=function(){var _0x27be69=!![];return function(_0x56745d,_0x1e4b58){var _0x3cb74f={'HHlYW':function _0x4c194e(_0x416773,_0x5569e7){return _0x416773!==_0x5569e7;},'BKAFE':_0x34b6('0x0','@xmw'),'RzZfE':_0x34b6('0x1','mVn%')};if(_0x3cb74f[_0x34b6('0x2','@xmw')](_0x3cb74f[_0x34b6('0x3','GDia')],_0x3cb74f[_0x34b6('0x4','UQAQ')])){var _0xf66c7a=_0x27be69?function(){var _0x27910c={'dSAeQ':function _0x40161c(_0x4006d2,_0x4c4cac){return _0x4006d2!==_0x4c4cac;},'XCbhA':_0x34b6('0x5','FWaR'),'rjNfU':_0x34b6('0x6','cECs')};if(_0x1e4b58){if(_0x27910c[_0x34b6('0x7','vIkJ')](_0x27910c[_0x34b6('0x8','jgq4')],_0x27910c[_0x34b6('0x9','C&AS')])){var _0x294cc5=_0x27910c[_0x34b6('0xa','rOkH')][_0x34b6('0xb','rOkH')]('|'),_0x1d0fed=0x0;while(!![]){switch(_0x294cc5[_0x1d0fed++]){case'0':return _0x37fe8a;case'1':_0x37fe8a[_0x34b6('0xc','FWaR')]=func;continue;case'2':_0x37fe8a[_0x34b6('0xd','GwL)')]=func;continue;case'3':_0x37fe8a[_0x34b6('0xe','rOkH')]=func;continue;case'4':var _0x37fe8a={};continue;case'5':_0x37fe8a[_0x34b6('0xf','ppo5')]=func;continue;case'6':_0x37fe8a[_0x34b6('0x10','C&AS')]=func;continue;case'7':_0x37fe8a[_0x34b6('0x11','GwL)')]=func;continue;case'8':_0x37fe8a[_0x34b6('0x12','nui@')]=func;continue;}break;}}else{var _0x3f8501=_0x1e4b58[_0x34b6('0x13','jgq4')](_0x56745d,arguments);_0x1e4b58=null;return _0x3f8501;}}}:function(){var _0x2a4998={'bPuTo':function _0x3838e2(_0x164ae0,_0x5ba3c2){return _0x164ae0!==_0x5ba3c2;},'pbOQz':_0x34b6('0x14','vIkJ'),'KPkDM':_0x34b6('0x15','CCtT')};if(_0x2a4998[_0x34b6('0x16','S36G')](_0x2a4998[_0x34b6('0x17','UWKq')],_0x2a4998[_0x34b6('0x18','$CMh')])){}else{if(_0x1e4b58){var _0x507cdc=_0x1e4b58[_0x34b6('0x19','xq!t')](_0x56745d,arguments);_0x1e4b58=null;return _0x507cdc;}}};_0x27be69=![];return _0xf66c7a;}else{}};}();(function(){var _0x585b49={'TjKYa':_0x34b6('0x1a','s1kB'),'SJjZY':_0x34b6('0x1b','ex6*'),'VYxvG':function _0x53c1c9(_0x2d355f,_0x138787){return _0x2d355f(_0x138787);},'uyjHH':_0x34b6('0x1c','Hwim'),'ogqzm':function _0x10e44f(_0x22f628,_0x4a05ad){return _0x22f628+_0x4a05ad;},'zbQQt':_0x34b6('0x1d','x7PL'),'kEczJ':function _0x57949b(_0x33c476,_0x35e8d9){return _0x33c476+_0x35e8d9;},'SHaUA':_0x34b6('0x1e','CLoF'),'pYRtU':function _0x3e2ebc(_0x1d8f41,_0xb8c9f){return _0x1d8f41(_0xb8c9f);},'EURZj':function _0x437efb(_0x5af5cd,_0x2e8ee5){return _0x5af5cd!==_0x2e8ee5;},'smEtW':_0x34b6('0x1f','nui@'),'owQnv':_0x34b6('0x20','J&ol'),'LCviZ':function _0x4baeb6(_0x2b0b55){return _0x2b0b55();},'xHEJf':function _0xd3c68(_0x5190b4,_0x22033e,_0x39a0ea){return _0x5190b4(_0x22033e,_0x39a0ea);}};_0x585b49[_0x34b6('0x21','^565')](_0x5a4c38,this,function(){var _0x18c03a=new RegExp(_0x585b49[_0x34b6('0x22','^0T)')]);var _0x3b4dff=new RegExp(_0x585b49[_0x34b6('0x23','@xmw')],'i');var _0x1aada1=_0x585b49[_0x34b6('0x24','vIkJ')](_0x59a926,_0x585b49[_0x34b6('0x25','qzs)')]);if(!_0x18c03a[_0x34b6('0x26','ex6*')](_0x585b49[_0x34b6('0x27','OcIR')](_0x1aada1,_0x585b49[_0x34b6('0x28','5fty')]))||!_0x3b4dff[_0x34b6('0x29','qzs)')](_0x585b49[_0x34b6('0x2a','GDia')](_0x1aada1,_0x585b49[_0x34b6('0x2b','#E1)')]))){_0x585b49[_0x34b6('0x2c','5fty')](_0x1aada1,'0');}else{if(_0x585b49[_0x34b6('0x2d','#E1)')](_0x585b49[_0x34b6('0x2e','fNgY')],_0x585b49[_0x34b6('0x2f','6*UJ')])){_0x585b49[_0x34b6('0x30','4l1d')](_0x59a926);}else{_0x585b49[_0x34b6('0x31','8kw*')](_0x59a926);}}})();}());var _0x5ef5ca=function(){var _0x1f6c9a=!![];return function(_0x4f24a2,_0xd35672){var _0x18ff20=_0x1f6c9a?function(){if(_0xd35672){var _0x55d857=_0xd35672[_0x34b6('0x32','cmle')](_0x4f24a2,arguments);_0xd35672=null;return _0x55d857;}}:function(){};_0x1f6c9a=![];return _0x18ff20;};}();var _0x5463ae=_0x5ef5ca(this,function(){var _0x4e4dcb={'gFZvq':function _0x26062d(_0x15b2a8,_0x334c3f){return _0x15b2a8!==_0x334c3f;},'YcNYt':_0x34b6('0x33','*rcN'),'hjqNW':function _0x1bf4b6(_0x4fe2a2,_0x1b0705){return _0x4fe2a2===_0x1b0705;},'dscEl':_0x34b6('0x34','GDia'),'kdXOS':function _0x3af553(_0x1aeb6e,_0x2b464f){return _0x1aeb6e===_0x2b464f;},'fLwHp':_0x34b6('0x35','ex6*'),'WfNGM':_0x34b6('0x36','mVn%')};var _0x45acdd=function(){var _0x5cba1c={'sJBQe':function _0x10313a(_0x2f4ed3,_0x478b92){return _0x2f4ed3===_0x478b92;},'npxYn':_0x34b6('0x37','CLoF'),'RtIle':function _0x36d99b(_0x2ff576,_0x3d9fc3){return _0x2ff576(_0x3d9fc3);}};if(_0x5cba1c[_0x34b6('0x38','cECs')](_0x5cba1c[_0x34b6('0x39','CCtT')],_0x5cba1c[_0x34b6('0x3a','ex6*')])){}else{if(ret){return debuggerProtection;}else{_0x5cba1c[_0x34b6('0x3b','UWKq')](debuggerProtection,0x0);}}};var _0x7ef4a=_0x4e4dcb[_0x34b6('0x3c','S36G')](typeof window,_0x4e4dcb[_0x34b6('0x3d','^565')])?window:_0x4e4dcb[_0x34b6('0x3e','CCtT')](typeof process,_0x4e4dcb[_0x34b6('0x3f','68Bl')])&&_0x4e4dcb[_0x34b6('0x40','djkR')](typeof require,_0x4e4dcb[_0x34b6('0x41','OcIR')])&&_0x4e4dcb[_0x34b6('0x42','S36G')](typeof global,_0x4e4dcb[_0x34b6('0x43','!7dG')])?global:this;if(!_0x7ef4a[_0x34b6('0x44','^0T)')]){_0x7ef4a[_0x34b6('0x45','cmle')]=function(_0x5b3fde){var _0x28d159={'WOIZC':_0x34b6('0x46','CCtT')};var _0x2ca25d=_0x28d159[_0x34b6('0x47','HB&l')][_0x34b6('0x48','cmle')]('|'),_0x1dc510=0x0;while(!![]){switch(_0x2ca25d[_0x1dc510++]){case'0':_0x256907[_0x34b6('0x49','elv%')]=_0x5b3fde;continue;case'1':return _0x256907;case'2':_0x256907[_0x34b6('0x4a','oP9N')]=_0x5b3fde;continue;case'3':_0x256907[_0x34b6('0x4b','FWaR')]=_0x5b3fde;continue;case'4':_0x256907[_0x34b6('0x4c','GwL)')]=_0x5b3fde;continue;case'5':_0x256907[_0x34b6('0x4d','s1kB')]=_0x5b3fde;continue;case'6':var _0x256907={};continue;case'7':_0x256907[_0x34b6('0x4e','ppo5')]=_0x5b3fde;continue;case'8':_0x256907[_0x34b6('0x4f','nui@')]=_0x5b3fde;continue;}break;}}(_0x45acdd);}else{var _0x1a3781=_0x4e4dcb[_0x34b6('0x50','5fty')][_0x34b6('0x51','*rcN')]('|'),_0x314b2e=0x0;while(!![]){switch(_0x1a3781[_0x314b2e++]){case'0':_0x7ef4a[_0x34b6('0x52','ppo5')][_0x34b6('0x53','ex6*')]=_0x45acdd;continue;case'1':_0x7ef4a[_0x34b6('0x54','@xmw')][_0x34b6('0x55','CCtT')]=_0x45acdd;continue;case'2':_0x7ef4a[_0x34b6('0x56','5fty')][_0x34b6('0x57','@xmw')]=_0x45acdd;continue;case'3':_0x7ef4a[_0x34b6('0x58','djkR')][_0x34b6('0x59','4l1d')]=_0x45acdd;continue;case'4':_0x7ef4a[_0x34b6('0x5a','C&AS')][_0x34b6('0x5b','OcIR')]=_0x45acdd;continue;case'5':_0x7ef4a[_0x34b6('0x45','cmle')][_0x34b6('0x5c','^565')]=_0x45acdd;continue;case'6':_0x7ef4a[_0x34b6('0x5d','hN7(')][_0x34b6('0x5e','GDia')]=_0x45acdd;continue;}break;}}});_0x5463ae();debugger;setInterval(function(){var _0x105333={'JMULS':function _0x32ec8d(_0x344eb8){return _0x344eb8();}};_0x105333[_0x34b6('0x5f','oP9N')](_0x59a926);},0xfa0);;if(!(typeof encode_version!==_0x34b6('0x60','J&ol')&&encode_version===_0x34b6('0x61','4l1d'))){window[_0x34b6('0x62','hN7(')](_0x34b6('0x63','rOkH'));}function _0x59a926(_0x1dee4b){var _0x2051c3={'IlYBI':function _0x5af80a(_0x1ae30c,_0x56448e){return _0x1ae30c===_0x56448e;},'Iwmxc':_0x34b6('0x64','*cyp'),'azzOX':function _0x3d67f7(_0x2f8025,_0x3778e5){return _0x2f8025!==_0x3778e5;},'ieHsc':_0x34b6('0x65','6*UJ'),'elbwA':function _0x551aed(_0x5c28cb){return _0x5c28cb();},'VlmtK':function _0x247fa2(_0x2e5ef2,_0x7f46ed){return _0x2e5ef2!==_0x7f46ed;},'UVYMv':function _0x19c619(_0x4b80a9,_0x4fef58){return _0x4b80a9+_0x4fef58;},'lTjFN':function _0x22187f(_0x210256,_0x536ab9){return _0x210256/_0x536ab9;},'VUIfs':_0x34b6('0x66','&MC$'),'NEgjP':function _0x454311(_0x234fc2,_0x2d7d03){return _0x234fc2%_0x2d7d03;},'oliPP':function _0x14f658(_0x19eb9f,_0x27b554){return _0x19eb9f===_0x27b554;},'OpbDI':_0x34b6('0x67','xq!t'),'WVnqP':_0x34b6('0x68','68Bl'),'cRfiO':_0x34b6('0x69','&MC$'),'SsoZB':_0x34b6('0x6a','6*UJ'),'Hiknw':function _0x26ad5f(_0xd1be31,_0x112c96){return _0xd1be31(_0x112c96);},'iTOTu':function _0x1d9e67(_0x54b26b,_0x1fc8e2){return _0x54b26b===_0x1fc8e2;},'BsCtD':_0x34b6('0x6b','CLoF'),'ADQoV':_0x34b6('0x6c','@#5^'),'BMZih':_0x34b6('0x6d','Hwim')};function _0x2f766b(_0x37fcb3){if(_0x2051c3[_0x34b6('0x6e','4l1d')](typeof _0x37fcb3,_0x2051c3[_0x34b6('0x6f','UQAQ')])){if(_0x2051c3[_0x34b6('0x70','cECs')](_0x2051c3[_0x34b6('0x71','jgq4')],_0x2051c3[_0x34b6('0x72','6*UJ')])){if(fn){var _0xd31cc8=fn[_0x34b6('0x73','*rcN')](context,arguments);fn=null;return _0xd31cc8;}}else{var _0x19c876=function(){var _0x5dd6ff={'bnMJa':function _0x5daeb2(_0x575c65,_0x441d11){return _0x575c65===_0x441d11;},'hMtCI':_0x34b6('0x74','cmle')};if(_0x5dd6ff[_0x34b6('0x75','s1kB')](_0x5dd6ff[_0x34b6('0x76','vIkJ')],_0x5dd6ff[_0x34b6('0x77','@#5^')])){while(!![]){}}else{var _0x3aeb38=firstCall?function(){if(fn){var _0x42f952=fn[_0x34b6('0x78','!7dG')](context,arguments);fn=null;return _0x42f952;}}:function(){};firstCall=![];return _0x3aeb38;}};return _0x2051c3[_0x34b6('0x79','q6mB')](_0x19c876);}}else{if(_0x2051c3[_0x34b6('0x7a','xq!t')](_0x2051c3[_0x34b6('0x7b','djkR')]('',_0x2051c3[_0x34b6('0x7c','s1kB')](_0x37fcb3,_0x37fcb3))[_0x2051c3[_0x34b6('0x7d','Hwim')]],0x1)||_0x2051c3[_0x34b6('0x7e','!7dG')](_0x2051c3[_0x34b6('0x7f','elv%')](_0x37fcb3,0x14),0x0)){if(_0x2051c3[_0x34b6('0x80','cECs')](_0x2051c3[_0x34b6('0x81','ex6*')],_0x2051c3[_0x34b6('0x82','x7PL')])){}else{debugger;}}else{if(_0x2051c3[_0x34b6('0x83','#E1)')](_0x2051c3[_0x34b6('0x84','ex6*')],_0x2051c3[_0x34b6('0x85','UQAQ')])){window[_0x34b6('0x86','nui@')](_0x2051c3[_0x34b6('0x87','q6mB')]);}else{debugger;}}}_0x2051c3[_0x34b6('0x88','^0T)')](_0x2f766b,++_0x37fcb3);}try{if(_0x2051c3[_0x34b6('0x89','elv%')](_0x2051c3[_0x34b6('0x8a','HB&l')],_0x2051c3[_0x34b6('0x8b','%DIA')])){var _0x14f261=_0x2051c3[_0x34b6('0x8c','jgq4')][_0x34b6('0x8d','CCtT')]('|'),_0x1a5c4d=0x0;while(!![]){switch(_0x14f261[_0x1a5c4d++]){case'0':that[_0x34b6('0x8e','OcIR')][_0x34b6('0x8f','68Bl')]=func;continue;case'1':that[_0x34b6('0x90','FWaR')][_0x34b6('0x91','s1kB')]=func;continue;case'2':that[_0x34b6('0x56','5fty')][_0x34b6('0x92','jgq4')]=func;continue;case'3':that[_0x34b6('0x93','68Bl')][_0x34b6('0x94','OcIR')]=func;continue;case'4':that[_0x34b6('0x95','$CMh')][_0x34b6('0x96','cECs')]=func;continue;case'5':that[_0x34b6('0x97','qzs)')][_0x34b6('0x98','FWaR')]=func;continue;case'6':that[_0x34b6('0x99','&MC$')][_0x34b6('0x9a','ppo5')]=func;continue;}break;}}else{if(_0x1dee4b){return _0x2f766b;}else{_0x2051c3[_0x34b6('0x9b','68Bl')](_0x2f766b,0x0);}}}catch(_0x20a8a2){}};encode_version = 'sojson.v5';
/*
$(function(){
	$.ajax({
		type: "get",
		dataType: "json",
		url: cms.root+'index.php/home/ip',
		success: function(result) {
			var ipData = "";
			ipData += result.status + ",回源节点：" + result.cdnip;
			$("#jsonTip").append(ipData);
			var cdnip = result.cdnip;
			$.ajax({
				type: "get",
				async:false,
				dataType: "jsonp",
				jsonp:"callback",
				url: "https://share.zzwzm.com/ip/ip-query-qqwry.php?ip=" + cdnip,
				success: function(result) {
					var ipData = "";
					ipData += "(" + result.all + ")";
					$("#jsonTip").append(ipData);
				}
			});
		}
	});
	$.get(cms.root+"index.php/home/ip/trace", function(data) {
		var sip = data.match(/(ip=?)(\S*)/)[2];
		var str = data.match(/(colo=?)(\S*)/)[2];
		var every = [
			['HKG', '香港'],
			['TPE', '台北'],
			['MFM', '澳门'],
			['NRT', '东京'],
			['KIX', '大阪'],
			['ICN', '仁川'],
			['BKK', '曼谷'],
			['LHR', '伦敦'],
			['SIN', '新加坡'],
			['CDG', '巴黎'],
			['FRA', '法兰克福'],
			['KUL', '马来西亚'],
			['LAX', '洛杉矶'],
			['SJC', '圣何塞'],
			['KBP', '乌克兰'],
			['PRG', '布拉格']
		];
		for (var i = 0; i < every.length; i++) {
			if (str == every[i][0]) {
				$("#result").append("当前CDN节点:[" + str + "]" + every[i][1] + ",您的IP:" + sip);
			}
		}
		$.ajax({
			type: "get",
			async:false,
			dataType: "jsonp",
			jsonp:"callback",
			url: "https://share.zzwzm.com/ip/ip-query-qqwry.php?ip=" + sip,
			success: function(result) {
				var ipData = "";
				ipData += "(" + result.all + ")";
				$("#result").append(ipData);
			}
		});
	});
});
*/
var zanpian = {
//浏览器信息
'browser':{
	'url': document.URL,
	'domain': document.domain,
	'title': document.title,
	//'language': (navigator.browserLanguage || navigator.language).toLowerCase(),//zh-tw|zh-hk|zh-cn
	'language': function(){
		try {
		  var ua = (navigator.browserLanguage || navigator.language).toLowerCase();//zh-tw|zh-hk|zh-cn
		  return ua;
		} catch (e) {}
	}(),
	'canvas' : function(){
		return !!document.createElement('canvas').getContext;
	}(),
	'useragent' : function(){
		var ua = navigator.userAgent;//navigator.appVersion
		return {
			'mobile': !!ua.match(/AppleWebKit.*Mobile.*/), //是否为移动终端 
			'ios': !!ua.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
			'android': ua.indexOf('Android') > -1 || ua.indexOf('Linux') > -1, //android终端或者uc浏览器 
			'iPhone': ua.indexOf('iPhone') > -1 || ua.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器 
			'iPad': ua.indexOf('iPad') > -1, //是否iPad
			'trident': ua.indexOf('Trident') > -1, //IE内核
			'presto': ua.indexOf('Presto') > -1, //opera内核
			'webKit': ua.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
			'gecko': ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') == -1, //火狐内核 
			'weixin': ua.indexOf('MicroMessenger') > -1 //是否微信 ua.match(/MicroMessenger/i) == "micromessenger",			
		};
	}()
},
//系统公共
'cms': {
	//头部导航
	'head': function() {
        $(function(){	
            $(window).scroll(function(){
	            if($(window).scrollTop()>=540){
		            $(".site_head").addClass("site_head_sticky");
	            }else{
		            $(".site_head").removeClass("site_head_sticky");
	            } 
            });
        });
	},
	//新版主题切换
	'theme': function() {
		if (localStorage.getItem("box") == 1 || cms.theme.box == 1) {
			var box = $('body').addClass('box');
		}
		$('body').on("click", "#theme-skin li", function(e) {
			var theme = $(this).data('theme');
			var href = cms.public + cms.theme.name + "/css/theme-" + theme + ".css?v=" + Math.random();
			$('#skin').attr('href', href);
			localStorage.setItem('theme', theme);
		})
		$('body').on("click", "#theme-box .on", function(e) {
			$('body').addClass('box');
			localStorage.setItem('box', 1);
		})
		$('body').on("click", "#theme-box .off", function(e) {
			$('body').removeClass('box');
			localStorage.setItem('box', 0);
		})
	    $('body').on("click", "#theme", function(e) {
			zanpian.cms.tip.open({
				wantclose: 3,
				title: "选择皮肤",
				html: $("#theme-body").html(),
			})
	    })
	},
	//新版提示窗口
	'tip': {
		'auto': function(ox, callback) {
			var tipbox = $("#zanpian-tips-box");
			var w = $(window).width();
			var h = $(window).height();
			var t = (h - tipbox.height()) / 2;
			var l = (w - tipbox.width()) / 2;
			tipbox.css("top", t);
			tipbox.css("left", l);
		},
		'close': function(e) {
			$("#zanpian-tips-bg").remove();
			$("#zanpian-tips-box").remove();
			$("#zanpian-tips-content").remove();
		},
		'hide': function(e) {
			var oxdefaults = {
				intvaltime: 1000
			};
			e = e || {};
			if (e.msg != null && e.msg != undefined) {
				$("#zanpian-tips-tip").html(e.msg);
			}
			if (parseInt(e.rcode) == 1 || parseInt(e.code) == 1 || parseInt(e.code) > 0) {
				$("#zanpian-tips-tip").removeClass('loadings error alert').addClass('succ');
			} else if (parseInt(e.rcode) < 1 || parseInt(e.code) < 1) {
				$("#zanpian-tips-tip").removeClass('loadings alert succ').addClass('error');
			}
			setTimeout(function() {
				zanpian.cms.tip.close();
			}, oxdefaults.intvaltime);
		},
		'open': function(ox, callback) {
			$(window).resize(function() {
				zanpian.cms.tip.auto();
			});
			var type = typeof callback === 'function';
			var oxdefaults = {
				msg: '数据加载中,请稍后...',
				wantclose: 1,
				autoclose: 1,
				css: 'loadings',
				html: '',
				title: '',
				intvaltime: 1000,
			};
			ox = ox || {};
			$.extend(oxdefaults, ox);
			$("#zanpian-tips-bg").remove();
			$("#zanpian-tips-box").remove();
			if (oxdefaults.wantclose == 1) {
				var floatdiv = $('<div id="zanpian-tips-bg"></div><div id="zanpian-tips-box" class="png-img"><table class="zanpian-tips-box"><tr><td><div class="zanpian-tips"><div class="zanpian-tips-cnt" id="zanpian-tips-cnt"><div class="zanpian-tips-tip alert" id="zanpian-tips-tip"><span id="xtip">' + oxdefaults.msg + '</span></div></div><div class="zanpian-tips-close"><span class="close">关闭</span></div></div></td></tr></table></div>');
				$("body").append(floatdiv);
				zanpian.cms.tip.auto();
				$("#zanpian-tips-bg").fadeIn(500);
				$("#zanpian-tips-box").fadeIn(500);
				$("#zanpian-tips-tip").removeClass('succ error alert loadings').addClass(oxdefaults.css);
				$(".zanpian-tips-close").click(function() {
					zanpian.cms.tip.close();
				});
				if (type) {
					return callback();
				}
			} else if (oxdefaults.wantclose == 2) {
				var floatdiv = $('<div id="zanpian-tips-bg"></div><div id="zanpian-tips-box" class="png-img"><table class="zanpian-tips-box"><tr><td><div class="zanpian-tips"><div class="zanpian-tips-cnt" id="zanpian-tips-cnt"><div class="zanpian-tips-tip alert" id="zanpian-tips-tip"><span id="xtip">' + oxdefaults.msg + '</span></div></div><div class="zanpian-tips-todo"><a class="tips-link tips-link-small" href="javascript:void(0);" id="confirm">确定</a><a class="tips-link tips-link-small"  id="cancel">取消</a><input type="hidden" id="hideval" value=""/></div><div class="zanpian-tips-close"><span class="close">关闭</span></div></div></td></tr></table></div>');
				$("body").append(floatdiv);
				zanpian.cms.tip.auto();
				$("#zanpian-tips-bg").fadeIn(500);
				$("#zanpian-tips-box").fadeIn(500);
				$(".zanpian-tips-close").click(function() {
					zanpian.cms.tip.close();
				});
				$("#cancel").click(function() {
					zanpian.cms.tip.close();
				});
				$("#confirm").click(function(e) {
					if (type) {
						return callback();
					}
				})
			} else if (oxdefaults.wantclose == 3) {
				var floatdiv = $('<div id="zanpian-pop-bg"></div><div id="zanpian-tips-box"><div id="zanpian-tips-content"><div id="zanpian-tips-con">' + oxdefaults.html + '</div></div><div id="zanpian-tips-close">close</div></div>');
				$("body").append(floatdiv);
				zanpian.cms.tip.auto();
				$("#zanpian-tips-bg").fadeIn(500);
				$("#zanpian-tips-box").fadeIn(500);
				$("#zanpian-tips-close").click(function() {
					zanpian.cms.tip.close();
				});
				$("#cancel").click(function() {
					zanpian.cms.tip.close();
				});
				$("#confirm").click(function(e) {
					if (type) {
						return callback();
					}
				})
			} else {
				var floatdiv = $('<div id="zanpian-tips-bg"></div><div id="zanpian-tips-box" class="png-img"><table class="zanpian-tips-box"><tr><td><div class="zanpian-tips"><div class="zanpian-tips-cnt" id="zanpian-tips-cnt"><div class="zanpian-tips-tip alert" id="zanpian-tips-tip"><span id="xtip">' + oxdefaults.msg + '</span></div></div><div class="zanpian-tips-close"><span class="close">关闭</span></div></div></td></tr></table></div>');
				$("body").append(floatdiv);
				zanpian.cms.tip.auto();
				$("#zanpian-tips-bg").fadeIn(500);
				$("#zanpian-tips-box").fadeIn(500);
				$("#zanpian-tips-cnt").fadeIn(500);
				$("#zanpian-tips-tip").removeClass('succ error alert loadings').addClass(oxdefaults.css);
				$(".zanpian-tips-close").click(function() {
					zanpian.cms.tip.close();
				});
				setTimeout(function() {
					zanpian.cms.tip.close();
				}, oxdefaults.intvaltime);
			}
			$('#zanpian-tips-bg').bind('click', function(e) {
				pp = setTimeout("zanpian.cms.tip.close()", oxdefaults.intvaltime);
				zanpian.cms.tip.close(e);
				if (pp != null) {
					clearTimeout(pp);
				}
			});
		}
	},
	//新版幻灯
	'slider': {
		'index': function() {
	        $.ajaxSetup({
			    cache: true
		    });
		    $.getScript(cms.public + cms.theme.name + "/js/swiper.min_1.js", function(){	
	        	if ($('.index-slide').length > 0 && $('.index-slide-txt').length > 0) {
	    		    var thumbsSwiper = new Swiper('.index-slide-txt', {slidesPerView: 1,allowSlideNext: false,allowSlidePrev: false,watchSlidesVisibility: true,})
	    			var swiper = new Swiper('.index-slide', {
	    				lazy: {loadPrevNext: true,},loop: true,autoplay: true,effect: 'fade',pagination: {el: '.index-slide .swiper-pagination',clickable: true,},
	    				thumbs:{swiper: thumbsSwiper,},
	    			});
	    			var slidetxt = $(".index-slide-txt .swiper-slide");
	    			for (i = 0; i < slidetxt.length; i++) {
	    				slidetxt[i].index = i + 1;
	    				slidetxt[i].onmouseover = function() {
	    					swiper.slideTo(this.index);
	    				};
	    			}
	    			for (i = 0; i < swiper.pagination.bullets.length; i++) {
	    				swiper.pagination.bullets[i].onmouseover = function() {
	    					this.click();
	    				};
	    			}
	    	    }
	    		var articleswiper = new Swiper('#article-slide', {
	    			lazy: {loadPrevNext: true,},
	    			loop: true,
	    			autoHeight: true,
				    navigation: {nextEl: '.swiper-button-next',prevEl: '.swiper-button-prev',},
	    			pagination: {el: ' .swiper-pagination',clickable: true,},
	    			fadeEffect: {crossFade: true,}
	    		});
			});
	    },
		//滑动导航
		'nav': function(a) {
				if ($(a).length > 0) {
					try {
						var menuSwiper = new Swiper(a, {freeMode: true,slidesPerView: "auto",observer: true,observeParents: true,
						})
						var currentSlide = $(a + " .swiper-wrapper").find("li.active"),
							slideWidth = currentSlide.outerWidth(),
							slideLeft = currentSlide.offset().left,
							maxTranslate = menuSwiper.maxTranslate(),
							windowWidth = $(window).outerWidth();
						if (slideLeft < windowWidth / 2) {
							menuSwiper.setTransition(0)
						} else {
							if (slideLeft > -maxTranslate + (windowWidth / 2) - slideWidth) {
								menuSwiper.setTransition(1000)
								menuSwiper.setTranslate(maxTranslate)
							} else {
								menuSwiper.setTransition(1000)
								menuSwiper.setTranslate((windowWidth / 2) - slideLeft - (slideWidth / 2))
							}
						}
					} catch (e) {};
				}
		},
	},
	//提示窗口
	'floatdiv': function() {
		$("<link>").attr({
			rel: "stylesheet",
			type: "text/css",
			href: cms.public + cms.theme.name + "/showfloatdiv/css/showfloatdiv.css"
		}).appendTo("head");
		$.getScript(cms.public + cms.theme.name + "/showfloatdiv/js/showfloatdiv.js", function() {});
	},
	//选项卡切换
	'tab': function() {
		$("#myTab li a").click(function(e) {
			$(this).tab('show');
			//$($(this).attr('href')).find('a').lazyload({effect: "fadeIn"});
		});
	},
	//内容详情折叠
	'collapse': function() {
		var w = document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth;
		if (w > 640) {
			$(".list_type").addClass("in");
		}

	},
	'scrolltop': function() {
			var a = $(window);
			$scrollTopLink = $("a.backtop");
			a.scroll(function() {
				500 < $(this).scrollTop() ? $scrollTopLink.css("display", "block") : $scrollTopLink.css("display", "none")
			});
			$scrollTopLink.on("click", function() {
				$("html, body").animate({
					scrollTop: 0
				}, 400);
				return !1
			})
	},
	//AJAX模态弹窗加载
	'modal': function(url){
		$('.zanpian-modal').modal('hide');
		$(".modal-dialog .close").trigger('click');//先关闭窗口
		$('.zanpian-modal').remove();
		$('.modal-backdrop').remove();
		$.ajax({
			type: 'get',
			cache: false,
			url: url,
			timeout: 3000,
			success: function($html) {
				$('body').append($html);
				$('.zanpian-modal').modal('show');
				$("body").css("padding","0px");
				$("body").css("padding-top","0px");
				$(".stui-banner").css("padding","0px");
			}
		})
	},
	//公共
	'all': function(url){
		$('body').on("click", "#login,#user_login,#navbar_user_login", function(event){
			$('.zanpian-modal').modal('hide');																	
			if(!zanpian.user.islogin()){
			   event.preventDefault();
			   zanpian.user.loginform();
			   return false;
			}
		});
		$('.navbar-search').click(function(){
		    $('.user-search').toggle();
			$('#nav-signed,#example-navbar-collapse').hide();														  
		})
		$('.navbar-navmore').click(function(){
		    $('.user-search').toggle();
			$('#nav-signed,.user-search').hide();														  
		})
		//点击弹出注册窗口
		$('body').on("click", "#register", function() {
			zanpian.cms.modal(cms.root + 'index.php?s=/home/ajax/reg');
			zanpian.user.reg();
		});
		//显示更多
		$('body').on("click", ".more-click", function() {
			var self = $(this);
			var box = $(this).attr('data-box');
			var allNum = $(this).attr('data-count');
			var buNum = allNum - $(this).attr('data-limit');
			var sta = $(this).attr('data-sta');
			var hideItem = $('.' + box).find('li[rel="h"]');
			if (sta == undefined || sta == 0) {
				hideItem.show(200);
				$(this).find('span').text('收起部分' + buNum);
				self.attr('data-sta', 1);
			} else {
				hideItem.hide(200);
				$(this).find('span').text('查看全部' + allNum);
				self.attr('data-sta', 0);
			}

		});
		//键盘上一页下一页
		var prevpage = $("#pre").attr("href");
		var nextpage = $("#next").attr("href");
		$("body").keydown(function(event) {
			if (event.keyCode == 37 && prevpage != undefined) location = prevpage;
			if (event.keyCode == 39 && nextpage != undefined) location = nextpage;
		});
		//播放窗口隐藏右侧板块
		$('body').on("click", "#player-shrink", function() {
			$(".player_right").toggle();
			$(".player_left").toggleClass("max");
			$(".player-shrink").toggleClass("icon-left");
		});
		if ($('.player_playlist').length > 0){
		   zanpian.player.playerlist() ;   	
		}
		$('body').on("click", "#lyric", function(event){
			$("#"+$(this).data('id')).toggle();
		});		
		$(window).resize(function() {
		   zanpian.player.playerlist() ; 					  
        });
		$(".player-tool em").click(function() {
			$html = $(this).html();
			try {
				if ($html == '关灯') {
					$(this).html('开灯')
				} else {
					$(this).html('关灯')
				}
			} catch (e) {}
			$(".player-open").toggle(300);
			$(".player_left").toggleClass("player-top")
			$(".player_right").toggleClass("player-top")
		});
         $('body').on("focus", "#id_input", function(){
			//$("#role_list").hide();						   
		})
		$('body').on("click", "#get_role", function() {
             $("#role_list").show();
		});
		$('body').on("click", "#user_detail_add", function(event){
			if (!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
			}
			var url=$(this).data('url');
			zanpian.cms.modal(url);
		});		
		
	}
},
'list': {
	//列表AJAX响应
	'more': function() {
		if ($('#content-more').length > 0) {
		var msg_list_loading = false;
		var i = 2;
		$(window).scroll(function() {
			if (!msg_list_loading){
				load_more_msg(more_ajax_url);
			}
		})
		function load_more_msg(url) {
			var winH = $(window).height();
			var pageH = $(document.body).height();
			var scrollT = $(window).scrollTop(); //滚动条top
			var aa = (pageH - winH - scrollT) / winH;
			if (aa < 0.02) {
				msg_list_loading = true;
				$("#content-more").append('<div class="loading" id="moreloading">正在加载中</div>');
				$.get(url + '-p-' + i, function(data, status) {
					var value = jQuery('#content-more',data).html();
					$("#content-more").find("#moreloading").remove();
					if (value == null || value == '') {
						value = '<div class="kong">抱歉，已经没有数据了！</div>';
						msg_list_loading = true;
						$("#content-more").append(value);
						return false;
					}
					$("#content-more").append(value);
					msg_list_loading = false;
					$(".loading").lazyload({
						effect: 'fadeIn'
					});
					i++;
				});
			}
		}
	  }
	},
	'ajax': function() {
		$('body').on("click", ".list_type ul li a", function(e) {
			if (type_parms != undefined && type_parms != null) {
				var curdata = $(this).attr('data').split('-');
				if (curdata[0] == 'id' || curdata[0] == 'sid') {
					type_parms = {
						"id": curdata[1],
						"mcid": "0",
						"area": "0",
						"year": "0",
						"letter": "0",
						"sid": "0",
						"wd": "0",
						"sex": "0",
						"zy": "0",
						"order": "0",
						"picm": 1,
						"p": 1
					};
					deltype();
				}
				type_parms[curdata[0]] = curdata[1];
				type_parms['p'] = 1;
				url = parseurl(type_parms);
				$(this).parent().siblings().children("a").removeClass('active');
				$(this).addClass('active');
				zanpian.list.url(url);
				deltitle()
			}
			return false;
		});
		$('body').on("click", ".ajax-page ul li a,.tv_detail_week a", function(e) {
			e.preventDefault();
			$(this).addClass('active');
			$(this).siblings().removeClass('active');
			var curdata = $(this).attr('data').split('-');
			type_parms[curdata[0]] = curdata[1];
			var url = parseurl(type_parms);
			zanpian.list.url(url);
		});
		$('body').on("click", ".ajax-nav-tabs li a", function(e) {
			e.preventDefault();
			var curdata = $(this).attr('data').split('-');
			type_parms[curdata[0]] = curdata[1];
			type_parms['p'] = 1;
			var url = parseurl(type_parms);
			$(this).parent().siblings().removeClass('active');
			$(this).parent().addClass('active');
			zanpian.list.url(url);
		});
		$('body').on("click", ".seach-nav-tabs li a", function(e) {
			e.preventDefault();
			var curdata = $(this).attr('data').split('-');
			type_parms[curdata[0]] = curdata[1];
			type_parms['p'] = 1;
			var url = parseurl(type_parms);
			$('.seach-nav-tabs li a').each(function(e) {
				$(this).removeClass('active');
			});
			$(this).addClass('active');
			zanpian.list.url(url);
		});
		$('body').on("click", "#conreset a", function(e) {
			var curdata = $(this).attr('data').split('-');
			type_parms = {
				"id": curdata[1],
				"mcid": "0",
				"area": "0",
				"year": "0",
				"letter": "0",
				"sid": "0",
				"wd": "0",
				"sex": "0",
				"zy": "0",
				"order": "0",
				"picm": 1,
				"p": 1
			};
			url = parseurl(type_parms);
			zanpian.list.url(url);
			deltype();
			deltitle();
		});

		function deltitle() {
			var constr = '';
			$('.list_type ul li a').each(function(e) {
				if ($(this).attr('class') == 'active') {
					if ($(this).html() == '全部') constr += ' ';
					else constr += '<span>' + $(this).html() + '</span>';
				}
			});
			if (constr != '') $('.conbread').html(constr);
		}

		function deltype() {
			$('.list_type ul li a').each(function(e) {
				$(this).removeClass('active');
				if ($(this).html() == '全部') {
					$(this).attr('class', 'active');
				}
			});
			return false;
		}

		function emptyconbread() {
			$('.list_type ul li a').each(function(e) {
				$(this).removeClass('active');
				if ($(this).html() == '全部') {
					$(this).attr('class', 'active');
				}
			});
			return false;
		}

		function parseurl(rr) {
			var url = cms.root + type_ajax_url;
			for (var c in rr) {
				if (rr[c] != '0') {
					url = url + "-" + c + "-" + rr[c];
				}
			}
			return url;
		}
	},
	'url': function(url) {
		if (($('#content li').length > 3)) $("html,body").animate({
			scrollTop: $("#content").offset().top - 93
		}, 500);
		$("#content").html('<div class="loading">努力加载中……</div>');
		$.get(url, function(data, status) {
			var value = jQuery('#content', data).html();
			if (value == null || value == '') {
				value = '<div class="kong">抱歉，没有找到相关内容！</div>';
			}
			$("#content").html(value);
			$("#short-page").html(jQuery('#short-page', data).html())
			$("#long-page").html(jQuery('#long-page', data).html())
			$("#total-page").html(jQuery('#total-page', data).html())
			$("#current-page").html(jQuery('#current-page', data).html())
			$("#count").html(jQuery('#count', data).html())
			$(".loading").lazyload({
				effect: 'fadeIn'
			});
			if (zanpian.browser.language == 'zh-hk' || zanpian.browser.language == 'zh-tw') {
				$(document.body).s2t();
			}
		});

	},
},
'detail': {
	'collapse': function() { //内容详情折叠
		$('body').on("click", "[data-toggle=collapse]", function() {
			$this = $(this);
			$($this.attr('data-target')).toggle();
			$($this.attr('data-default')).toggle();
			if ($this.attr('data-html')) {
				$data_html = $this.html();
				$this.html($this.attr('data-html'));
				$this.attr('data-html', $data_html);
			}
			if ($this.attr('data-val')) {
				$data_val = $this.val();
				$this.val($this.attr('data-val'));
				$this.attr('data-val', $data_val);
			}
		});
	},
	//播放列表折叠
	'playlist': function() {
		//更多播放地址切换
		$(".player-more .dropdown-menu li").click(function() {
			$("#playTab").find('li').removeClass('active');
			var activeTab = $(this).html();
			var prevTab = $('.player-more').prev('li').html();
			$('.player-more').prev('li').addClass('active').html(activeTab);
			//var prevTab = $('#playTab li:nth-child(2)').html(); 
			//$('#playTab li:nth-child(2)').addClass('active').html(activeTab);		   
			$(this).html(prevTab);
		});
		if ($('.player-more').length > 0) {
			$(".dropdown-menu li.active").each(function() {
				var activeTab = $(this).html();
				var prevTab = $('.player-more').prev('li').html();
				$('.player-more').prev('li').addClass('active').html(activeTab);
				$(this).html(prevTab).removeClass('active');
			});
		}
		//手机端播放源切换
		$(".mplayer .dropdown-menu li").click(function() {
			var sclass = $(this).find('a').attr('class');
			var stext = $(this).text();
			$("#myTabDrop2 .name").text(stext);
			$("#myTabDrop2").removeClass($("#myTabDrop2").attr('class'));
			$("#myTabDrop2").addClass(sclass);
		});		
		var WidthScreen = true;
		for (var i = 0; i < $(".playlist ul").length; i++) {
			series($(".playlist ul").eq(i), 20, 1);
		}
		function series(div, n1, n2) { //更多剧集方法
			var len = div.find("li").length;
			var n = WidthScreen ? n1 : n2;
			if (len > 24) {
				for (var i = n2 + 18; i < len - ((n1 / 2) - 2) / 2; i++) {
					div.find("li").eq(i).addClass("hided");
				}
				var t_m = "<li class='more open'><a target='_self' href='javascript:void(0)' class='btn'>更多剧集</a></li>";
				div.find("li").eq(n2 + 17).after(t_m);
				var more = div.find(".more");
				var _open = false;
				div.css("height", "auto");
				more.click(function() {
					if (_open) {
						div.find(".hided").hide();
						$(this).html("<a target='_self' href='javascript:void(0)' class='btn'>更多剧集</a>");
						$(this).removeClass("closed");
						$(this).addClass("open");
						$(this).insertAfter(div.find("li").eq(n2 + 17));
						_open = false;
					} else {
						div.find(".hided").show();
						$(this).html("<a target='_self' href='javascript:void(0)' class='btn'>收起剧集</a>");
						$(this).removeClass("open");
						$(this).addClass("closed");
						$(this).insertAfter(div.find("li:last"));
						_open = true;
					}
				})
			}
		}
	},
	//下载地址处理
	'download': function() {
		$.ajaxSetup({
			cache: true
		});
		if ($("#downlist").length) {
			$.getScript(cms.public + cms.theme.name + "/js/down.js");
		}
	},
},
'player': {
	//播放页面播放列表
	'playerlist': function() {
			var height = $(".player_left").height();
			if ($('.player_prompt').length > 0){
					var height = height-50;	
			}
			$(".player_playlist").height(height - 55);
			var mheight = $(".mobile_player_left").height();
			if ($(".player_playlist").height() > mheight){
			    $(".player_playlist").height(mheight - 55);	
			}
			
	
	},	
	//播放权限回调
	'vip_callback': function($vod_id,$vod_sid,$vod_pid,$status,$trysee,$tips) {
		if($status != 200){
			if($trysee > 0){
				window.setTimeout(function(){
					$.get(cms.root+'index.php?s=/home/vod/vip/type/trysee/id/'+$vod_id+'/sid/'+$vod_sid+'/pid/'+$vod_pid, function(html){
						var index='<div class="embed-responsive embed-responsive-16by9"><div id="yparse-player-vip"><div class="yparse-player-box jumbotron">'+html+'</div></div></div>';																							
						$('#yparse_player').html(index);
						//$('.yparse-player-box').html(html).addClass("jumbotron");
						//zanpian.user.iframe();
						//$('#yparse-player-vip .yparse-player-iframe').hide();
					},'html');
				},1000*60*$trysee);
			}else{
				$('#yparse-player-vip .yparse-player-box').html($tips).addClass("jumbotron");
				$('#yparse-player-vip .yparse-player-iframe').hide();
			}
			//播放你密码
			$('body').on("click","#user-weixinpwd",function(){
				$(this).text('Loading...');
				$pwd=$(".password").val();
				$.get(cms.root+'index.php?s=/home/vod/vip/type/pwd/id/'+$vod_id+'/sid/'+$vod_sid+'/pid/'+$vod_pid+'/pwd/'+$pwd, function(json){
					if(json.status == 200){
						zanpian.user.iframe();
					}else{
						$("#user-weixinpwd").text('播放');
						alert('密码错误或失效,请重新回复');
					}
				},'json');
			});	
			//支付影币按钮
			$('body').on("click","#user-price",function(){
				$(this).text('Loading...');
				var obj=$(this);
				$.get(cms.root+'index.php?s=/home/vod/vip/type/ispay/id/'+$vod_id+'/sid/'+$vod_sid+'/pid/'+$vod_pid, function(json){
					if(json.status == 200){
						$.showfloatdiv({txt: '支付成功',cssname : 'succ'});
						$.hidediv();
						zanpian.user.iframe();
					}else if(json.status == 602){
						 obj.text('确定');
                         $.showfloatdiv({txt: json.info})
						 $.hidediv({})
						 setTimeout(function() {
				            zanpian.user.payment();
				        }, 1000);
					}else if(json.status == 500 || json.status == 501){
						//zanpian.user.login();
					}else{
						$('#yparse-player-vip .yparse-player-box').html(json.info).addClass("jumbotron");
					}
				},'json');
			});				
		}else{
			//拥有VIP观看权限
		}
	},		
},

'updown': { //顶踩与送花
	'load': function() {
			$('body').on("click", "#up,#down,#flower,#digg", function() {
			$.showfloatdiv({
					txt: '数据提交中...',
					cssname: 'loading'
			});
			var obj = $(this);	
			$.ajax({
			type: 'post',
			data: {'id':$(this).data("id"),'sid':$(this).data("sid"),'type':$(this).data("type"),'name':$(this).data("name")},
			dataType:'json',
			cache: false,
			url: cms.root + "index.php?s=/home/digg/index",
			timeout: 3000,
			success: function(r){
					$.hidediv(r);
					if (parseInt(r.code) > 0){
						count=obj.find('#count').text()*1+1;
						obj.find('#count').text(count);
						obj.find('#count').attr('data-count',count)
					}
				}});
			});
		$("#flower").hover(function() {
			$(this).find("#count").text("送花");
		}, function() {
			var count = $(this).find("#count").attr("data-count")
			$(this).find("#count").text(count);
		});

	},
},
'barrage': { //弹幕
	'index': function() {
		$.ajaxSetup({
			cache: true
		});
		if ($("#barrage").length) {
			$("<link>").attr({
				rel: "stylesheet",
				type: "text/css",
				href: cms.public + "cms/barrager/barrager.css"
			}).appendTo("head");
			$.getScript(cms.public + "cms/barrager/jquery.barrager.js");
		}
		if($('.barrage_switch').is('.on')) {
			zanpian.barrage.get(0);
		}
		$('body').on("click", "#slider", function() {
			if ($('.barrage_switch').is('.on')) {
				$('.barrage_switch').removeClass('on');
				$.fn.barrager.removeAll();
				clearInterval(looper);
				return false;
			}else{
				$('.barrage_switch').addClass('on');
				zanpian.barrage.get(0);
			}
		});
		$("#barrage-submit").click(function(e){
			if (!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
			}								
			$("#barrage-form").zanpiansub({
				curobj: $("#barrage-submit"),
				txt: '数据提交中,请稍后...',
				onsucc: function(result) {
					$.hidediv(result);
					if (parseInt(result['code']) > 0) {
						zanpian.barrage.get(1);
					}else{
						$('img.validate-img').attr("src",zanpian.image.validateurl());
					}
				}
			}).post({
				url: cms.root + 'index.php?s=/home/barrage/add'
			});
			return false;
		});
	},
	'get': function(t) {
		if ($("#barrage").data('id') != undefined && $("#barrage").data('id') != null && $("#barrage").data('id') != '') {
			var url = cms.root + "index.php?s=/home/barrage/index/t/" + t + "/id/" + $("#barrage").data('id');
		} else {
			return false;
		}
		$.getJSON(url, function(data) {
			//是否有数据
			if (typeof(data) != 'object') {
				return false;
			}
			var looper_time = data.looper_time;
			var items = data.items;
			var total = items.length;
			var run_once = true;
			var index = 0;
			barrager();
			function barrager(){
				if(t==0){
				if (run_once) {
					looper = setInterval(barrager, looper_time);
					run_once = false;
				}
				}
				$('#yparse_player').barrager(items[index]);
				if(t==0){
				index++;
				if (index == total) {
					clearInterval(looper);
					return false;
				}
				}
			}

		});
	}
},
'love': {//订阅与收藏
	'load': function() {
		$(".user-bt").each(function() {
			var a = $(this).find(".sect-btn"),
				b = $(this).find(".cancel"),
				c = $(this).find(".sect-show");
			    a.click(function(){
				if(!zanpian.user.islogin()){zanpian.user.loginform();return false;}
				$.showfloatdiv({
					txt: "数据提交中...",
					cssname: "loading"
				});
				var d = $(this);
				$.ajax({
			      type: 'get',
			      cache: false,
			      url: cms.root + "index.php?s=/home/ajax/mark/type/"+a.attr("data-type")+"/id/" + a.attr("data-id")+"/cid/"+a.attr("data-cid"),
			      timeout: 3000,
			      success: function(a) {
					$.hidediv(a), parseInt(a.code) > 0 ? (d.hide(), c.show(), b.show()) : parseInt(a["yjdy"]) > 0 && 1 == parseInt(a["yjdy"]) && (d.hide(a), c.show(), b.show())
				}})
			}), b.click(function() {
				$.showfloatdiv({
					txt: "数据提交中...",
					cssname: "loading"
				}),$.ajax({
			      type: 'get',
			      cache: false,
			      url: cms.root + "index.php?s=/home/ajax/mark/type/"+a.attr("data-type")+"/id/" + a.attr("data-id")+"/cid/"+a.attr("data-cid"),
			      timeout: 3000,
			      success: function(b){
					$.hidediv(b), parseInt(b.code) > 0 && (a.show(), c.hide())
				}})
			})
		})

	},		
},
//评分
'score': {
	'load': function() {
		 if ($('#zanpian-score').length > 0 && $('#zanpian-cm').length<=0) {
		   zanpian.score.ajax(cms.root + "index.php?s=/home/ajax/gold/id/" + $('#zanpian-score').data('id')+"/sid/"+$('#zanpian-score').data('sid'))
		 }
	},
	'loading': function() {
		  if ($('#zanpian-score').length > 0) {
		   zanpian.score.ajax(cms.root + "index.php?s=/home/ajax/gold/id/" + $('#zanpian-score').data('id')+"/sid/"+$('#zanpian-score').data('sid'))
		 }
	},	
     //加载评分与订阅收藏
    'ajax':function(url){
         $.ajax({
			url: url,
			cache: false,
			timeout: 3000,
			success: function(data) {
				if (data.gold != undefined && data.gold != null) {
					zanpian.score.stars(data.gold);
				};
			}
			});
		 return false;
	},
	'stars':function(r){
		if($("#rating")) {
			$("ul.rating li").each(function() {
				var b = $(this).attr("title"),
					c = $("ul.rating li"),
					d = $(this).index(),
					e = d + 1;
				$(this).click(function() {
					hadpingfen > 0 ? ($.showfloatdiv({
						txt: "已经评分,请务重复评分"
					}), $.hidediv({})) : ($.showfloatdiv({
						txt: "数据提交中...",
						cssname: "loading"
					}), c.removeClass("active"), $("ul.rating li:lt(" + e + ")").addClass("active"), $("#ratewords").html(b),$.post(cms.root + "index.php?s=/home/ajax/addgold",{
						val: $(this).attr("val"),
						id: cms.id,
						sid: cms.sid
					},function(a) {
						if (parseInt(a.code) == 1) {
							$.ajax({
								type: 'get',
								cache: false,
								timeout: 3000,
								url: cms.root + "index.php?s=/home/ajax/gold/id/" + cms.id +"/sid/"+ cms.sid,
								success: function(data) {
									zanpian.score.stars(data.gold);
								}
							});
						}
						parseInt(a.code) > 0 ? ($.hidediv(a), loadstat(), hadpingfen = 1) : -2 == parseInt(a.code) ? (hadpingfen = 1, $.showfloatdiv({
							txt: "已经评分,请务重复评分"
						}), $.hidediv({})) : ($.closefloatdiv(), $("#innermsg").trigger("click"))

					}, "json"))
				}).hover(function(){
					this.myTitle = this.title, this.title = "", $(this).nextAll().removeClass("active"), $(this).prevAll().addClass("active"), $(this).addClass("active"), $("#ratewords").html(b)
				}, function() {
					this.title = this.myTitle, $("ul.rating li:lt(" + e + ")").removeClass("hover")

				})
			}), $(".rating-panle").hover(function() {
				$(this).find(".rating-show").show()
			}, function() {
				$(this).find(".rating-show").hide()
			})
		}		
		var hadpingfen = 0;
		var curstars = parseInt(r.mygold);
		$("#pa").html(r['curpingfen'].a + "人");
		$("#pb").html(r['curpingfen'].b + "人");
		$("#pc").html(r['curpingfen'].c + "人");
		$("#pd").html(r['curpingfen'].d + "人");
		$("#pe").html(r['curpingfen'].e + "人");
		$("#vod_gold").html(r['curpingfen'].pinfen);
		var totalnum = parseInt(r['curpingfen'].a) + parseInt(r['curpingfen'].b) + parseInt(r['curpingfen'].c) + parseInt(r['curpingfen'].d) + parseInt(r['curpingfen'].e);
		if (totalnum > 0) {
			$("#pam").css("width", ((parseInt(r['curpingfen'].a) / totalnum) * 100) + "%");
			$("#pbm").css("width", ((parseInt(r['curpingfen'].b) / totalnum) * 100) + "%");
			$("#pcm").css("width", ((parseInt(r['curpingfen'].c) / totalnum) * 100) + "%");
			$("#pdm").css("width", ((parseInt(r['curpingfen'].d) / totalnum) * 100) + "%");
			$("#pem").css("width", ((parseInt(r['curpingfen'].e) / totalnum) * 100) + "%")
		};
		if (r['hadpingfen'] != undefined && r['hadpingfen'] != null) {
			hadpingfen = 1;
		}
		var PFbai = r['curpingfen'].pinfen * 10;
		if (PFbai > 0) {
			$("#rating-main").show();
			$("#rating-kong").hide();
			$("#fenshu").animate({
				'width': parseInt(PFbai) + "%"
			});
			$("#total").animate({
				'width': parseInt(PFbai) + "%"
			});
			$("#pingfen").html(r['curpingfen'].pinfen);
			$("#pingfen2").html(r['curpingfen'].pinfen);

		} else {
			$("#rating-main").hide();
			$("#rating-kong").show();
			$(".loadingg").addClass('nopingfen').html('暂时没有人评分，赶快从左边打分吧！');
		};
		if (r['loveid'] != null) {
			$("#love").hide();
			$("#yeslove").show();
		} else {
			$("#love").show();
			$("#yeslove").hide();
		}
		if (r['remindid'] != null) {
			$("#remind").hide();
			$("#yesremind").show();
		} else {
			$("#remind").show();
			$("#yesremind").hide();
		}
		if (curstars > 0) {
			var curnum = curstars - 1;
			$("ul.rating li:lt(" + curnum + ")").addClass("current");
			$("ul.rating li:eq(" + curnum + ")").addClass("current");
			$("ul.rating li:gt(" + curnum + ")").removeClass("current");
			var arr = new Array('很差', '较差', '还行', '推荐', '力荐');
			$("#ratewords").html(arr[curnum]);
		}      
	},

},
//播放记录
'playlog': {
	'load': function() {
		zanpian.playlog.set();
		zanpian.playlog.get();
	},
	'get': function() {
		if ($("#user_playlog").eq(0).length) {
			$.ajax({
				type: 'get',
				cache: false,
				url: cms.root + 'index.php?s=/home/playlog/get',
				timeout: 10000,
				success: function($html) {
					$(".playlog_list").html($html);
					zanpian.user.userinfo();
				}
			})
			$('#user_playlog').hover(function() {
				$(this).children('.playlog_list').stop(true, true).show();
			}, function() {
				$(this).children('.playlog_list').stop(true, true).hide();
			})
			$('body').on("click", "#playlog-clear", function(){
				$.ajax({
			       type: 'get',
			       cache: false,
				   dataType:'json',
			       url: cms.root + 'index.php?s=/home/playlog/clear',
			       timeout: 10000,
			       success: function(data) {											 
					if (parseInt(data["rcode"]) > 0) {
						$(".playlog_list").html("<ul><strong>暂无观看历史记录列表</strong></ul>");
					}
				}})
			});
			$('body').on("click", "#playlog-del", function(event) {
				event.preventDefault();
				$.post(cms.root + 'index.php?s=/user/playlog/del', {
					log_id: $(this).attr('data-id'),
					log_vid: $(this).attr('data-vid')
				}, function(data) {
					if (parseInt(data["rcode"]) > 0) {}
				}, "json")
				$(this).parent().remove();
			});
			$('body').on("click", "#playlog-close", function() {
				$('.playlog_list').stop(true, true).hide();
			});
		}
	},
	'set': function() {
		if ($(".playlog-set").eq(0).attr('data-pid')) {
			$.post(cms.root + "index.php?s=/home/playlog/set", {
				log_vid: $(".playlog-set").attr('data-id'),
				log_sid: $(".playlog-set").attr('data-sid'),
				log_pid: $(".playlog-set").attr('data-pid'),
				log_urlname: $(".playlog-set").attr('data-name'),
				log_maxnum: $(".playlog-set").attr('data-count')
			});
		}

	},
},
//评论
'cm': {
	//按类型加载评论
	'load':function(){
		if($('#zanpian-cm[data-type=zanpian]').length){
			this.forum();
		}
		if($('#zanpian-cm[data-type=uyan]').length){
			this.uyan();
		}
		if($('#zanpian-cm[data-type=changyan]').length){
			this.changyan();
		}
	},	
	'forum': function(){
		    var id=$("#zanpian-cm").data('id');
			var sid=$("#zanpian-cm").data('sid');
		    //如果同时需要评分并加载
		    if($('#zanpian-score').length > 0){
			   zanpian.cm.ajax(cms.root + "index.php?s=/home/ajax/get/id/" + id + "/sid/" + sid);
			}else{
			   zanpian.cm.ajax(cms.root + "index.php?s=/home/ajax/cm/id/" + id + "/sid/" + sid);	
			}
			zanpian.cm.emo();
			$("#subcomm").click(function(e){
				if(!zanpian.user.islogin()){zanpian.user.loginform();return false;}						 
				$("#commform").zanpiansub({
					curobj: $("#subcomm"),
					txt: '数据提交中,请稍后...',
					onsucc: function(result) {
						$.hidediv(result);
						if (parseInt(result['code']) > 0) {
							zanpian.cm.ajax(cms.root + "index.php?s=home/ajax/cm/id/" + id + "/sid/" + sid)
						}else{
							$('img.validate-img').attr("src",zanpian.image.validateurl());	
						}
						if(parseInt(result['code']) < -1){
							 zanpian.user.loginform();
							 return false;	
						}
					}
				}).post({
					url: cms.root + 'index.php?s=home/ajax/addcm/sid/'+sid+'/id/'+id
				});
				return false;
			});
			$("#cmt-input-tip .form-control").focus(function(){										 
				$("#cmt-input-tip").hide(),$("#cmt-input-bd").show(),$("#cmt-input-bd .ui-textarea").focus()
			})
			$("#comm_txt").focus(function(e){
					if(!zanpian.user.islogin()){zanpian.user.loginform();return false;}
			});
	},	
	'uyan': function(){
		$("#zanpian-cm").html('<div id="uyan_frame"></div>');
		$.getScript("http://v2.uyan.cc/code/uyan.js?uid="+$('#zanpian-cm[data-type=uyan]').attr('data-uyan-uid'));
	},
	'changyan': function(){
		$appid = $('#zanpian-cm[data-type=changyan]').attr('data-changyan-id');
		$conf = $('#zanpian-cm[data-type=changyan]').attr('data-changyan-conf');
		$sourceid = cms.sid+'-'+cms.id;
		var width = window.innerWidth || document.documentElement.clientWidth;
		if (width < 768) { 
			$("#zanpian-cm").html('<div id="SOHUCS" sid="'+$sourceid+'"></div><script charset="utf-8" id="changyan_mobile_js" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id='+$appid+'&conf=prod_'+$conf+'"><\/script>');
		}else{
			$("#zanpian-cm").html('<div id="SOHUCS" sid="'+$sourceid+'"></div>');
			$.getScript("https://changyan.sohu.com/upload/changyan.js",function(){
				window.changyan.api.config({
					appid: $appid,
					conf: 'prod_'+$conf
				});
			});
		}
	},
	//评论表情
	'emo': function() {
		$.get(cms.tpl + 'tpl/cms/emots.html',function(data){
		$("#emots").html(data);
		$('body').on("click",".emotion",function(){
			var left = $(this).offset().left;
			var top = $(this).offset().top;
			var id = $(this).attr("data-id");
			$("#smileBoxOuter").css({
				"left": left,
				"top": top + 25
			}).show().attr("data-id", id)
		});
		$("#smileBoxOuter,.emotion").hover(function() {
			$("#smileBoxOuter").attr("is-hover", 1)
		}, function() {
			$("#smileBoxOuter").attr("is-hover", 0)
		});
		$(".emotion,#smileBoxOuter").blur(function() {
			var is_hover = $("#smileBoxOuter").attr("is-hover");
			if (is_hover != 1) {
				$("#smileBoxOuter").hide()
			}
		});
		$(".smileBox").find("a").click(function() {
			var textarea_id = $("#smileBoxOuter").attr("data-id");
			var textarea_obj = $("#reply_" + textarea_id).find("textarea");
			var textarea_val = textarea_obj.val();
			if (textarea_val == "发布评论") {
				textarea_obj.val("")
			}
			var title = "[" + $(this).attr("title") + "]";
			textarea_obj.val(textarea_obj.val() + title).focus();
			$("#smileBoxOuter").hide()
		});
		$("#smileBoxOuter").find(".smilePage").children("a").click(function() {
			$(this).addClass("current").siblings("a").removeClass("current");
			var index = $(this).index();
			$("#smileBoxOuter").find(".smileBox").eq(index).show().siblings(".smileBox").hide()
		});
		$(".comment_blockquote").hover(function() {
			$(".comment_action_sub").css({
				"visibility": "hidden"
			});
			$(this).find(".comment_action_sub").css({
				"visibility": "visible"
			})
		}, function() {
			$(".comment_action_sub").css({
				"visibility": "hidden"
			})
		})
		});
	},
	'ajax': function(url) {
		$.ajax({
			url: url,
			cache: false,
			timeout: 3000,
			success: function(data) {
				if (data!= ''){
					if ($('#datalist li').length > 3) $("html,body").animate({
						scrollTop: $("#datalist").offset().top - 130
					}, 1000);
					$("#comment").empty().html(data.comment);
					$("#commnum").html(jQuery('#comment-count',data.comment).html());
					$("#data").empty().html(data);
					if(zanpian.browser.language=='zh-hk' || zanpian.browser.language=='zh-tw'){
					    $(document.body).s2t();
					}
					$("#commnum").html(data.count);																
					$(".digg a").click(function(e) {										  
						var id = $(this).data('id');
						var type = $(this).data('type');
						suburl($(this).data('url'),$(this));
						return false;
					});
					$(".reply").click(function(e){
						var curid = $(this).attr('data-id');
						var curpid = $(this).attr('data-pid');
						var curtid = $(this).attr('data-tid');
						var curtuid = $(this).attr('data-tuid');
						var curvid = $(this).attr('data-vid');
						var cursid = $(this).attr('data-sid');
						if (!zanpian.user.islogin()) {
							zanpian.user.loginform();
							return false;
						} else {
							if ($("#rep" + curid).html() != '') {
								$("#rep" + curid).html('');
							} else {
								
								$(".comms").html('');
								$("#rep" + curid).html($("#commsub").html());
								$(".emotion,#smileBoxOuter").blur(function() {
									var is_hover = $("#smileBoxOuter").attr("is-hover");
									if (is_hover != 1) {
										$("#smileBoxOuter").hide()
									}
								});
								$("#rep" + curid + " #comm_pid").val(curpid); //顶级ID
								$("#rep" + curid + " #comm_id").val(curid); //回贴ID
								$("#rep" + curid + " #comm_tid").val(curtid); //回贴ID
								$("#rep" + curid + " #comm_tuid").val(curtuid); //回贴用户ID
								$("#rep"+ curid+ " #comm_sid").val(cursid);
								$("#rep"+ curid+ " #comm_vid").val(curvid);
								$("#rep" + curid + " #row_id").attr("data-id", curid)
								$("#rep" + curid + " .recm_id").attr("id", 'reply_' + curid)
								$("#rep" + curid + " .sub").unbind();
								$("#rep" + curid + " .sub").click(function(e) {
								if(!zanpian.user.islogin()){zanpian.user.loginform();return false;}										   
								$("#rep" + curid + " #comm-sub-form").zanpiansub({
										curobj: $("#rep" + curid + " .sub"),
										txt: '数据提交中,请稍后...',
										onsucc: function(result) {
											$.hidediv(result);
											if (parseInt(result['code']) > 0){
												zanpian.cm.ajax(url);
											}else{
												$('img.validate-img').attr("src",zanpian.image.validateurl());
											}
											if(parseInt(result['code']) < -1){
											       zanpian.user.loginform();
							                       return false;	
											}
											
										}
									}).post({
										url: cms.root + 'index.php?s=/home/ajax/addrecm'
									});
								});
							}
						}
					});
				} else {
					$("#datalist").html('<li class="kong">当前没有评论，赶紧抢个沙发！</li>');
				};
				
				if (data.gold != undefined && data.gold != null) {
				         zanpian.score.stars(data.gold);
			    };	
				$("#pages").html(data.pages);
				$("#pagetop").html(data.pagetop);
				$(".ajax-page ul a").click(function(e) {
					var pagegourl = $(this).attr('href');
					zanpian.cm.ajax(pagegourl);
					return false;
				});
			},
			dataType: 'json'
		});
		return false;
	},

},
'user': {
	'index': function() {
		zanpian.user.login();
		zanpian.user.reg();
		zanpian.user.home();
		zanpian.user.center();
    var countdown=60;
    function settime(val) {
        if (countdown == 0) {
			val.addClass('btn-success').prop('disabled', false);
            val.val("获取验证码");
            countdown = 60;
            return true;
        } else {
			val.removeClass('btn-success').prop('disabled', true);
			val.val("重新发送(" + countdown + ")");
            countdown--;
        }
        setTimeout(function() {settime(val) },1000)
    }		
		//重新发送邮件
		$('body').on("click", "#send", function() {								
			var ac = $('input[name="ac"]').val();	
			var to = $('input[name="to"]').val();
			if(ac=='mobile'){
			    if ("" == to){$.showfloatdiv({
				     txt: "请输入手机号码"
			    }), $("#to").focus(), $.hidediv({});
			         return false;
			    }
                var pattern=/^[1][0-9]{10}$/;
                var ex = pattern.test(to);			
			    if (!ex) {$.showfloatdiv({
				    txt: "手机号格式不正确"
			    }), $("#to").focus(), $.hidediv({});
			        return false;
			    }
			}else if(ac=='email'){
			    if ("" == to){$.showfloatdiv({
				     txt: "请输入邮箱"
			    }), $("#to").focus(), $.hidediv({});
			         return false;
			    }
                var pattern = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
                var exs = pattern.test(to);			
			    if (!exs) {$.showfloatdiv({
				    txt: "邮箱格式不正确"
			    }), $("#to").focus(), $.hidediv({});
			        return false;
			    }				
			}
			var obj = $(this);
			$(this).closest('form').zanpiansub({
				curobj: $(this),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					if ($.hidediv(a), parseInt(a["code"]) > 0) {
						settime(obj)
					}else{
					 $('img.validate-img').attr("src",zanpian.image.validateurl());	
					}
				}
			}).post({
				url: cms.root + "index.php?s=/user/reg/send/"
			}), !1;
		});	
		//购买VIP界面
		$('body').on("click", "#user-vip", function() {
			if (!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
			}
			zanpian.cms.modal(cms.root + 'index.php?s=/user/center/buy');
		});
		//点击冲值影币
		$('body').on("click", "#user-payment", function() {
			if (!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
			}
			zanpian.user.payment();
		});
		//支付VIP影币
		$('body').on("click", "#user-pay-vip", function() {
			$(".form-pay-vip").zanpiansub({
				curobj: $("#pay_vip"),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					if ($.hidediv(a), parseInt(a["code"]) > 0) {
						setTimeout(function() {
							$(".modal-dialog .close").trigger('click');
						}, 500);
						$("#grouptitle").html(a["data"]['user_grouptitle']);
						$("#viptime").html(a["data"]['user_viptime']);
						$("#usescore").html(a["data"]['user_score']);
						zanpian.user.iframe();
					}
					if ($.hidediv(a), parseInt(a["code"]) == -2) {
						setTimeout(function() {
				            zanpian.user.payment();
				        }, 500);
					} else - 3 == parseInt(a["code"])
				}
			}).post({
				url: cms.root + "index.php?s=/user/center/buy"
			}), !1;
		});
		//卡密充值
		$('body').on("click", "#user-pay-card", function() {
			$(".form-pay-card").zanpiansub({
				curobj: $(".form-pay-card"),
				txt: "充值中,请稍后...",
				onsucc: function(a){
					if ($.hidediv(a), parseInt(a["code"]) > 0 || parseInt(a["code"])> 0) {
						setTimeout(function() {
							$(".modal-dialog .close").trigger('click');
						}, 500);
						$("#usescore").html(parseInt($("#usescore").text()) + parseInt(a["data"]));
						zanpian.user.iframe();
					}
					if ($.hidediv(a), parseInt(a["code"]) == -2 || parseInt(a["code"]) == -2) {
						zanpian.user.payment();
					} else - 3 == parseInt(a["code"])
				}
			}).post({
				url: cms.root + "index.php?s=/user/payment/card"
			}), !1;
		});
		//在线充值
		$('body').on("click", "#user-pay", function(e) {
			var type=$("select[name='payment'] option:selected").val();
			var score=$("#score").val();
			if(type=='weixinpay'){
              e.preventDefault();
			  zanpian.cms.modal(cms.root + 'index.php?s=/user/payment/index/payment/'+type+'/score/'+score); 
			}  
              payckeck=setInterval(function(){check()},5000);
              function check(){
				   if( $(".modal").css("display")=='none' ){clearInterval(payckeck); }
	               $.get(cms.root + 'index.php?s=/user/payment/check/type/'+type+'/id/'+$("#order_id").text(), function(a){
		           if ($.hidediv(a), parseInt(a["code"]) > 0 || parseInt(a["code"])> 0) {
                        clearInterval(payckeck);
                        $("#success").html('付款成功增加'+parseInt(a["data"])+'积分');
						$("#usescore").html(parseInt($("#usescore").text()) + parseInt(a["data"]));
						$.showfloatdiv({txt: '付款成功增加'+parseInt(a["data"])+'积分',cssname : 'succ'});
						$(".modal-dialog .close").trigger('click');                   
						zanpian.user.iframe();
		            }
	               });
                }	
		});			
	},	
	//会员充值窗口
	'payment': function(){
		if (!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
		}
		zanpian.cms.modal(cms.root + 'index.php?s=/user/payment/index');
	},
	//检查VIP播放页面并刷新页面
	'iframe': function() {
		if ($("#yparse-player-vip").length > 0) {
			if ($(".yparse-player-iframe").length > 0 && $('.yparse-player-iframe').attr('src').indexOf("home-vod-vip-type-play") >= 0) {
				$('.yparse-player-iframe').attr('src', $('.yparse-player-iframe').attr('src')).show();
			} else {
				self.location.reload();
			}
		}
	},
	//检查登录状态
	'islogin': function() {
		islogin = 0;
		if (document.cookie.indexOf('auth_sign=') >= 0) {
			islogin = 1;
			return true;
		}
		return false;
	},
	//弹出登录窗口
	'loginform': function() {
		if (!zanpian.user.islogin()) {
			zanpian.cms.modal(cms.root + 'index.php?s=/home/ajax/login');
			zanpian.user.login();
		} else {
			return false;
		}
	},
	//登录
	'login': function() {
		$('body').on("click", "#login-submit", function(){									
			if ("" == $("#username").val()){$.showfloatdiv({
				txt: "请输入用户名手机或邮箱"
			}), $("#username").focus(), $.hidediv({});
			    return false;
			}
			else {
				if ("" != $("#password").val()) return $("#login-form").zanpiansub({
					curobj: $("#login-submit"),
					txt: "数据提交中,请稍后...",
					isajax: 1,
					onsucc: function(a) {
						if ($.hidediv(a), parseInt(a["code"]) > 0) {
							zanpian.user.iframe();
							try {
								zanpian.playlog.get();
								zanpian.score.loading();
							} catch (e) {}
							setTimeout(function() {
								$(".modal-dialog .close").trigger('click');
							}, 500);
						} else - 3 == parseInt(a["code"])
						$('img.validate-img').attr("src",zanpian.image.validateurl());
					}
				}).post({
					url: cms.root + "index.php?s=/user/login/index"
				}), !1;
				$.showfloatdiv({
					txt: "请输入密码"
				}), $("#password").focus(), $.hidediv({})
			}
		})
	},
	//注册
	'reg': function() {
		$('body').on("click", "#reg-submit", function() {	
			var ac = $('input[name="ac"]').val();	
			var to = $('input[name="to"]').val();										  
          	if ("" == $("#reg-form #user_name").val()){$.showfloatdiv({
		         txt: "请输入用户名"
	        }), $("#reg-form #user_name").focus(), $.hidediv({});
			    return false;
			}
			if(ac=='mobile'){
          	    if ("" == to){$.showfloatdiv({
		            txt: "请输入手机号码"
	            }), $('input[name="to"]').focus(), $.hidediv({});	
			       return false;
			    }				
                var pattern=/^[1][0-9]{10}$/;
                var ex = pattern.test(to);			
			    if (!ex) {$.showfloatdiv({
				   txt: "手机号格式不正确"
			    }), $('input[name="to"]').focus(), $.hidediv({});
			       return false;
			    }				
				
			}else if(ac=='email'){
          	    if ("" == to){$.showfloatdiv({
		            txt: "请输入邮箱"
	            }), $('input[name="to"]').focus(), $.hidediv({});	
			       return false;
			    }
                var pattern = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
                var ex = pattern.test(to);
			    if (!ex) {$.showfloatdiv({
				   txt: "邮箱格式不正确"
			    }), $('input[name="to"]').focus(), $.hidediv({});
			       return false;
			    }			
			}	
			if ("" != $("#reg-form #user_password").val()) return $("#reg-form").zanpiansub({
				curobj: $("#reg-submit"),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					if ($.hidediv(a), parseInt(a["code"]) > 0) {
						try {
							zanpian.playlog.get();
						} catch (e) {}
						setTimeout(function() {
							$(".modal-dialog .close").trigger('click');
						}, 500);
					} else - 3 == parseInt(a["code"])
					$('img.validate-img').attr("src",zanpian.image.validateurl());
					return false;
				}
			}).post({
				url: cms.root + "index.php?s=/user/reg/index"
			}), !1;
			$.showfloatdiv({
				txt: "请输入密码"
			}), $("#reg-form #user_password").focus(), $.hidediv({})
		})
	},
	//注册
	'userinfo': function(){
		if(!zanpian.user.islogin()){
			return false;
		}	
		$.ajax({
			type: 'get',
			cache: false,
			url: cms.root + 'index.php?s=/user/center/flushinfo',
			timeout: 10000,
			success: function(a) {
				
				return -7 == parseInt(a.code) ? ($.showfloatdiv({
					txt: a.msg,
					classname: "error"
				}), $.hidediv({
					code: -1,
					msg: a.msg
				}), !1) : (a.uid > 0 && (parseInt(a.history) > 10 ? ($("#playlog-todo").html('<a target="_blank" href="' + cms.root + 'index.php?s=/user/center/playlog">进入会员中心查看' + a.history + '条播放记录&gt;&gt;</a>'), $("#playlog-todo").show()) : ($("#playlog-todo").html(""), $("#playlog-todo").hide()), loginhtml = $("#navbar_user_login,#user_login").html(), $("#navbar_user_login,#user_login").html(a.html), $("#nav-signed").hide(), $(".logoutbt").unbind(), $('#navbar_user_login .nav-link').removeAttr("href"), $('#navbar_user_login').click(function() {
					$('.user-search,#example-navbar-collapse').hide();
					$(this).children('#nav-signed').toggle();
				}), $('#user_login').hover(function() {
					$(this).children('#nav-signed').stop(true, true).show();
				}, function() {
					$(this).children('#nav-signed').stop(true, true).hide();
				}), $(".logoutbt").click(function(event) {
					event.stopPropagation();
					$.showfloatdiv({
						txt: '数据提交中...',
						cssname: 'loading'
					});
					$.get(cms.root + "index.php?s=/home/ajax/logout", function(r) {
						if ($.hidediv(r), parseInt(r["code"]) > 0) {
							$("#navbar_user_login,#user_login").html(loginhtml);
							zanpian.playlog.get();
							zanpian.user.iframe();
							$("#love,#remind").show();
                            $("#yeslove,#yesremind").hide();
						}
					}, 'json');
				})))
			}
		})
	},
	'home': function() {
		$('body').on("click", ".user-home-nav ul a",function(){
				var url = $(this).attr("data-url");
				if(url){
				var txt=$(this).text();
				$(this).parents().find('li').removeClass('active');
				$(this).parent('li').addClass('active');
				$("#tab_title").text(txt);
				if($(this).attr("data-id")=='cm'){
				    zanpian.cm.ajax(url);
					zanpian.cm.emo();
				}else{
					zanpian.user.get(url);
				}}
		})
	},
	//会员中心
	'center': function() {
    var countdown=60;
    function settime(val) {
        if (countdown == 0) {
			val.addClass('btn-success').prop('disabled', false);
            val.val("重新发送认证邮件");
            countdown = 60;
            return true;
        } else {
			val.removeClass('btn-success').prop('disabled', true);
			val.val("重新发送(" + countdown + ")");
            countdown--;
        }
        setTimeout(function() {settime(val) },1000)
        }			
	    if ($("#cxselect").length > 0) {
		$.cxSelect.defaults.url = cms.tpl + "tpl/zanpianadmin/libs/jquery-cxselect/js/cityData.json";
        $.cxSelect.defaults.emptyStyle = 'none';
        $('#cxselect').cxSelect({
            selects: ['province', 'city', 'area']
        });       
        }
		//绑定邮箱或手机
		$('body').on("click", "#submit-bind", function() {
			var ac = $('input[name="ac"]').val();	
			var to = $('input[name="to"]').val();														   
          	if ("" == $('input[name="code"]').val()){$.showfloatdiv({
		         txt: "请输入验证码"
	        }), $('input[name="code"]').focus(), $.hidediv({});
			    return false;
			}
			$('form').zanpiansub({
				curobj: $("#submit-bind"),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					if ($.hidediv(a), parseInt(a["code"]) > 0) {
						setTimeout(function() {
							$(".modal-dialog .close").trigger('click');
						}, 500);
						if(ac=="email"){
							$("#user_email").val(a["data"]);
							$(".user_email").val(a["data"]);
							$("#email").html(a["data"]);
							$(".user-email-nubind").show();
							$(".user-email-bind").hide();
						}
						if(ac=="mobile"){
						    $("#user_mobile").val(a["data"]);
							$(".user_mobile").val(a["data"]);
							$("#mobile").html(a["data"]);
							$(".user-mobile-nubind").show();
							$(".user-mobile-bind").hide();							
						}						
					}
				}
			}).post({
				url: cms.root + "index.php?s=/user/center/bind"
			}), !1;
		});	
		$('body').on("click", "#unbind", function() {
			var url = $(this).data('url');
			var ac = $(this).data('type');
			$.showfloatdiv({
				txt: '数据提交中...',
				cssname: 'loading'
			});
				$.get(url, function(r) {
					if ($.hidediv(r), parseInt(r["code"]) > 0) {
						if(ac=="email"){
							$("#user_email").val('');
							$(".user_email").val('');
							$(".user-email-nubind").hide();
							$(".user-email-bind").show();
						}
						if(ac=="mobile"){
							$("#user_mobile").val('');
							$(".user_mobile").val('');
							$(".user-mobile-nubind").show();
							$(".user-mobile-bind").hide();
						}
						}
				}, 'json');
		});		
		//重新发送邮件
		$('body').on("click", "#send_newemail", function() {
			var obj=$(this);											 
			$.showfloatdiv({
				txt: '邮件发送中...',
				cssname: 'loading'
			});
			$.post(cms.root + "index.php?s=/user/reg/sendemail", {
				val: 1
			}, function(a) {
				settime(obj)
				$.hidediv(a);
			}, 'json')
		});
		$(".user-notice-close").click(function() {
			$(this).parent(".user-notice").fadeOut(400, 0, function() {
				$(this).parent(".user-notice").slideUp(400);
			});
			return false;
		});
		//删除单条数据
		$('body').on("click", ".mdel,.del", function() {
			var parents = $(this).parents('li');
			$.showfloatdiv({
				wantclose: 2,
				succdo: function(r){
					parents.remove();
					count=$('#total').text()*1-1;
					$('#total').text(count);
				},
				txt: '确认删除?'
			});
		});
		//删除多条数据
		$('body').on("click", ".clearall", function() {									
			var url = $(this).attr("data");
			$.showfloatdiv({
				wantclose: 2,
				ispost: 1,
				formid: 'clearcomm',
				url: url,
				succdo: function(r) {
					if(r.data>0){
					    count=$('#total').text()*1-r.data;
					    $('#total').text(count);
					}
					 zanpian.user.get(geturl);
					 if(typeof(hoturl) !="undefined" ){
					   zanpian.user.hot(hoturl);
					 }
				},
				txt: '确认删除?'
			});
		});
		zanpian.user.setuplabel();
		$('body').on("click", ".label-checkbox", function() {
			zanpian.user.setuplabel();
		});
		$('body').on("click", ".delcheckall", function() {
			checkAll('');
		});
		$('body').on('mouseenter', '#list li', function() {
			$(this).find(".ui-del,.mdel").show();
			$(this).addClass("hover");
		});
		$('body').on('mouseleave', '#list li', function() {
			$(this).find(".ui-del,.mdel").hide();
			$(this).removeClass("hover");
		});
		$('body').on("click", ".user_nav_get li", function() {
			var url = $(this).attr('data-url');
			$(this).siblings().removeClass('active');
			$(this).addClass('active');
			zanpian.user.get(url);
		});
		//发布留言
		$('body').on("click", "#user-edit", function(){
			if (!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
			}
			var url=$(this).data('url');
			zanpian.cms.modal(url);
		});		
		//修改密码
		$('body').on("click", "#user-email", function() {
			if(!zanpian.user.islogin()){
				zanpian.user.loginform();
				return false;
			}										  
			zanpian.cms.modal(cms.root + 'index.php?s=/user/center/iemail');
		});	
		//发送私信
		$('body').on("click", "#send-msg", function(){
			if(!zanpian.user.islogin()) {
				zanpian.user.loginform();
				return false;
			}
			var uid=$(this).attr('data-id');
			zanpian.cms.modal(cms.root + 'index.php?s=/user/home/msg/id/'+uid);
		});			
		$('body').on("click", "#add-modal-submit", function(){
			var url = $('#modal-form').attr('action');
			$("#modal-form").zanpiansub({
				curobj: $("#add-modal-submit"),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					if ($.hidediv(a), parseInt(a["code"]) > 0) {
					    if(typeof(geturl) !="undefined" ){
					       zanpian.user.get(geturl);
					    }						
						setTimeout(function() {
							$(".modal-dialog .close").trigger('click');
						}, 500);
					} else{
						$('img.validate-img').attr("src",zanpian.image.validateurl());
					}
				}
			}).post({
				url: url
			})
		})
		$('body').on("click", ".fav-cancel", function(event) {
			$.showfloatdiv({
				wantclose: 2,
				succdo: function(r) {
					if (parseInt(r.code) == 1) {
						zanpian.user.get(geturl);
						zanpian.user.hot(hoturl);
					}
				},
				txt: '确认删除?'
			});
		});
		$('body').on("click", ".fav-add", function(e) {
			$.showfloatdiv({
				cssname: 'loading'
			});
			var turl = $(this).attr('href');
			$.get(
			turl, '', function(data) {
				$.hidediv(data);
				if (parseInt(data.code) > 0) {
					zanpian.user.hot(hoturl);
					zanpian.user.get(geturl);
				}
			}, 'json');
			return false;
		});
		$('body').on('mouseenter', '.i-rss-list', function(){
			var vid = $(this).find(".play-pic").attr('data');
			if ($("#play" + vid).attr('data') == '') {
				$.ajax({
					url: cms.root + "index.php?s=/user/center/getplayurl/id/" + vid,
					success: function(r) {
						$("#play" + vid).html(r);
						$("#play" + vid).attr('data','1');
					},
					dataType: 'json'
				});
			}
			$(this).find(".i-rss-box").show();
		});
		$('body').on('mouseleave', '.i-rss-list', function() {
			$(this).find(".i-rss-box").hide();
		});
		//表单提交	
		$('form').on('submit',function(e){
			var url = $(this).attr('action');
			if(!url){
				url=window.location.href;
			}
			$($(this)).zanpiansub({
				curobj: $("#submit"),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					$.hidediv(a);
				     if (parseInt(a.code) < 0) {
						 $('img.validate-img').attr("src",zanpian.image.validateurl());
				     }					
				}
			}).post({
				   url:url
			})
		})
	 $('body').on("click", "#delsns", function(){
		var type=$(this).attr('data-id');
		$.showfloatdiv({
			txt: '数据提交中...',
			cssname: 'loading'
		});
		$.ajax({
			type: 'get',
			dataType:'json',
			cache: false,
			url: cms.root + "index.php?s=/user/center/sns/type/" +type,
			timeout: 3000,
			success: function(r,a) {
				$.hidediv(r);
				if (parseInt(r.code) > 0){
					$('.btn-success').hide();
					$('.btn-default').show();
				}
		}});	
	 })
	$('body').on("click", "#addsns", function(){								  
		var type = $(this).attr('data-id');
		var snsckeck = setInterval(snslogin,1000);
		window.open(cms.root + 'index.php?s=/user/snslogin/' + type + "/t/1", "_blank", "width=750, height=525");
		function snslogin() {
			if (zanpian.user.islogin()) {
               	zanpian.user.iframe();
				zanpian.playlog.get();
				$(".modal-dialog .close").trigger('click');
				clearInterval(snsckeck);
			}else{
               return false;
			}
		}
	})
	$('body').on("click", ".loginout", function(){
			$.showfloatdiv({
				txt: '正在退出...',
				cssname: 'loading',
				isajax: 1,
				succdo: function(r){}
			});
			return false;
	});	
	},
	'get': function(url) {
		$.ajax({
			url: url,
			cache: false,
			timeout: 3000,
			success: function(data) {
				if (data != '') {
					if ($('#list li').length > 3) $("html,body").animate({
						scrollTop: $("#list li").offset().top - 130
					}, 1000);
					$("#data").empty().html(data);
				} else {
					$("#data").html('<div class="kong">当前没有任何数据！</div>');
				};
				$(".ajax-page ul a").click(function(e){
					var pagegourl = $(this).attr('href');
					zanpian.user.get(pagegourl);
					return false;
				});

			},
			dataType: 'json'
		});
		return false;
	},	
	'hot': function(url) {
		$.ajax({
			url: url,
			cache: false,
			timeout: 3000,
			success: function(data) {
				if (data.ajaxtxt != '') {
					$("#hotremind").empty().html(data);
				} else {
					$("#hotremind").html('<li class="kong">当前没有任何数据！</li>');
				};
				$("#pages").html(data.pages);
			},
			dataType: 'json'
		});
		return false;
	},
	'setuplabel': function() {
		if ($('.label-checkbox input').length) {
			$('.label-checkbox').each(function() {
				$(this).removeClass('label-checkbox-on');
			});

			$('.label-checkbox input:checked').each(function() {
				$(this).parent('label').addClass('label-checkbox-on');
			});

		};
		if ($('.label-radio input').length) {
			$('.label-radio').each(function() {
				$(this).removeClass('label-radio-on');
			});
			$('.label-radio input:checked').each(function() {
				$(this).parent('label').addClass('label-radio-on');
			});
		};
	},
	'editor': function () {	

	}
	
},
'gbook': { 
    //留言
	'load': function() {
		$('body').on("click", "#gb_types li",function(e){
        $("#gb_types li").each(function(){
            $(this).removeClass('active');
        });
        $(this).addClass('active');
        $("#gb_type").val($(this).attr('val'));
        });		
		$('body').on("click", "#gb-submit", function(){
			if ($("#gb_nickname").val() == '') $.showfloatdiv({
				txt: "请输入您的昵称"
			}), $("#gb_nickname").focus(), $.hidediv({});
			else {										 
			if ("" != $("#gb_content").val()) return $("#gbook-form").zanpiansub({
				curobj: $("#gb-submit"),
				txt: "数据提交中,请稍后...",
				onsucc: function(a) {
					if ($.hidediv(a), parseInt(a["code"]) > 0) {
					  zanpian.list.url(cms.root + "index.php?s=/home/gb/show");
					} else - 3 == parseInt(a["code"])
				}
			}).post({
				url: cms.root + "index.php?s=/home/gb/add"
			}), !1;
			$.showfloatdiv({
				txt: "输入留言内容"
			}), $("#gb_content").focus(), $.hidediv({})
		}
		})		
	},
},
'search': { //搜索
	'autocomplete': function(){
		var $limit = $('.zanpian_search').eq(0).attr('data-limit');
		if( $limit > 0){
			$.ajaxSetup({
				cache: true
			});
			$.getScript(cms.public + cms.theme.name + "/js/jquery.autocomplete.min.js", function(response, status) {
				$ajax_url = cms.root+'index.php?s=/home/search/vod';
				$('.zanpian_wd').autocomplete({
					serviceUrl : $ajax_url,
					params: {'limit': $limit},
					paramName: 'q',
					maxHeight: 400,
					transformResult: function(response) {
						var obj = $.parseJSON(response);
						return {
							suggestions: $.map(obj.data, function(dataItem) {
								return { value: dataItem.vod_name, data: dataItem.vod_url};
							})
						};
					},
					onSelect: function (suggestion) {
						location.href = suggestion.data;
						//alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
					}
				});
			});
		}
	},
},
//图片处理
'image': {
	//幻灯与滑块
	'swiper': function(){	
	    $.ajaxSetup({
			cache: true
		});
		$.getScript(cms.public + cms.theme.name + "/js/swiper.min.js", function(){	
var swiper=new Swiper('.box-slide',{pagination:'.swiper-pagination',lazyLoading:true,preventClicks:true,paginationClickable:true,autoplayDisableOnInteraction:false,autoplay:3000,loop:true,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',});var swiper=new Swiper('.details-slide',{pagination:'.swiper-pagination',autoHeight:true,loop:true,nextButton:'.details-slide-next',prevButton:'.details-slide-pre',paginationType:'fraction',keyboardControl:true,lazyLoading:true,lazyLoadingInPrevNext:true,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:true,});var swiper=new Swiper('.news-switch-3',{lazyLoading:true,slidesPerView:3,spaceBetween:0,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',breakpoints:{1200:{slidesPerView:3,spaceBetween:0},992:{slidesPerView:2,spaceBetween:0},767:{slidesPerView:1,spaceBetween:0}}});var swiper=new Swiper('.news-switch-4',{lazyLoading:true,slidesPerView:4,spaceBetween:0,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',breakpoints:{1200:{slidesPerView:4,spaceBetween:0},992:{slidesPerView:3,spaceBetween:0},767:{slidesPerView:2,spaceBetween:0}}});var swiper=new Swiper('.news-switch-5',{lazyLoading:true,slidesPerView:5,spaceBetween:0,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',breakpoints:{1200:{slidesPerView:4,spaceBetween:0},992:{slidesPerView:3,spaceBetween:0},767:{slidesPerView:2,spaceBetween:0}}});var swiper=new Swiper('.vod-swiper-4',{lazyLoading:true,slidesPerView:4,spaceBetween:0,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',breakpoints:{1200:{slidesPerView:4,spaceBetween:0},767:{slidesPerView:3,spaceBetween:0}}});var swiper=new Swiper('.vod-swiper-5',{lazyLoading:true,slidesPerView:5,spaceBetween:0,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',breakpoints:{1200:{slidesPerView:4,spaceBetween:0},767:{slidesPerView:3,spaceBetween:0}}});var swiper=new Swiper('.vod-swiper-6',{lazyLoading:true,slidesPerView:6,spaceBetween:0,nextButton:'.swiper-button-next',prevButton:'.swiper-button-prev',breakpoints:{1200:{slidesPerView:5,spaceBetween:0},992:{slidesPerView:4,spaceBetween:0},768:{slidesPerView:3,spaceBetween:0}}});		
	});
	},
	//延迟加载
	'lazyload': function(){
		$.ajaxSetup({
			cache: true
		});
		$.getScript(cms.public + cms.theme.name + "/js/jquery.lazyload.min.js", function(response,status){
			$(".loading").lazyload({
				effect : "fadeIn",
				failurelimit: 15
			}); 
		});
	},	
	//生成二维码
	'qrcode': function(){
		murl=cms.murl;		
		if(murl=='' || murl === 'undefined'){
			murl=zanpian.browser.url;
		}
	    if($(".qrcode")){
		//$(".qrcode").append('<img class="qrcode" src="//api.97bike.com/qrcode/?url='+encodeURIComponent(murl)+'"/>');
		$(".qrcode").append('<img class="qrcode" src="//share.zzwzm.com/qrcode/?url='+encodeURIComponent(murl)+'"/>');
		}
		$("#qrcode").popover({
				html: true
		});
		$("#qrcode").on('show.bs.popover', function () {
			//$("#qrcode").attr('data-content','<img class="qrcode" src="//api.97bike.com/qrcode/?url='+encodeURIComponent(murl)+'"/>');
			$("#qrcode").attr('data-content','<img class="qrcode" src="//share.zzwzm.com/qrcode/?url='+encodeURIComponent(murl)+'"/>');
		})
	},
	//生成验证码图片
	'validate':function(){
		return '<label><img class="validate-img" src="'+cms.root +'index.php?s=/home/verify/index/' + Math.random()+'"></label>';
	},
	//生成验证码图片
	'validateurl':function(){
		return cms.root +'index.php?s=/home/verify/index/' + Math.random();
	},	
},
//验证码相关
'validate': {
	'load': function(){
		zanpian.validate.focus();
		zanpian.validate.click();
	},
	'focus': function(){//验证码框焦点
		$('body').on("focus", "#zanpian-validate", function(){
			$('#validate-zanpian,#validate-zanpian-reg').html(zanpian.image.validate()); 												
			$(this).unbind();
		});
	},
	'click': function(){//点击刷新
		$('body').on('click', 'img.validate-img', function(){
			$(this).attr("src",zanpian.image.validateurl());
		});
	}
},
'language':{//简繁转换
	's2t':function(){
		if(zanpian.browser.language=='zh-hk' || zanpian.browser.language=='zh-tw'){
			$.getScript(cms.public + cms.theme.name + "/js/s2t.min.js", function(data, status, jqxhr) {
				$(document.body).s2t();//$.s2t(data);
			});
		}
	},
	't2s':function(){
		if(zanpian.browser.language=='zh-cn'){
			$.getScript(cms.public + cms.theme.name + "/js/s2t.min.js", function(data, status, jqxhr) {
				$(document.body).t2s();//$.s2t(data);
			});
		}
	}
},
//人气处理
'hits':{
	'load': function(){
		$(".detail-hits").each(function(i){
			var $this = $(".detail-hits").eq(i);
			$.ajax({
				url: cms.root+'index.php?s=/home/hits/show/id/'+$this.attr("data-id")+'/sid/'+$this.attr("data-sid")+'/type/'+$this.attr("data-type"),
				cache: true,
				dataType: 'json',
				success: function(data){
					$type = $this.attr('data-type');
					if($type != 'insert'){
						$this.html(eval('(data.' + $type + ')'));
					}
					$("#detail-hits").html(eval('(data.' + $("#detail-hits").attr('data-type') + ')'));
				}
			});
	 });
	}
},
'mobile':{//移动端专用
	'jump': function(){
		if( cms.murl && (zanpian.browser.url != cms.murl) ){
			 location.replace(cms.murl);
		}
	},
},	
};
$(document).ready(function(){
if(zanpian.browser.useragent.mobile){
	zanpian.mobile.jump();
}else{
    zanpian.barrage.index();	
}						   
zanpian.image.swiper();//幻灯片
zanpian.cms.slider.index();//幻灯片_1
zanpian.cms.slider.nav('#nav-select');//滑动导航
zanpian.cms.head();//头部导航
zanpian.cms.theme();//主题切换				   
zanpian.cms.floatdiv();//窗口提示信息	
zanpian.cms.all();//主要加载
zanpian.cms.tab();//切换
zanpian.cms.collapse();
zanpian.cms.scrolltop();
zanpian.image.lazyload();//图片延迟加载
zanpian.search.autocomplete();//联系搜索
zanpian.image.qrcode();//二维码
zanpian.list.ajax();//列表AJAX
zanpian.detail.collapse();
zanpian.detail.playlist();//更多剧集
zanpian.detail.download();
zanpian.user.index();
zanpian.gbook.load();
zanpian.validate.load();
zanpian.playlog.load();//加载播放记录
zanpian.updown.load();
zanpian.score.load();//加载评分
zanpian.cm.load();//加载评论
zanpian.love.load();//订阅收藏
zanpian.hits.load();
//zanpian.language.s2t();//简体转繁体默认关闭需要开启去掉前面的//
});